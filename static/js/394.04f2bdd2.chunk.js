(self.webpackChunkpc_datacatalog=self.webpackChunkpc_datacatalog||[]).push([[394],{3974:function(e,t,n){"use strict";n.r(t),n.d(t,{ImageViewer:function(){return m}});var o=n(4519),r=n(46382),i=n(22167),a=n(40827),l=n(82546),s=n(13023),c=n(21280),d=n(57035),u=n(17928),h=n(2556),m=function(e){var t=e.ImageResponse,n=(e.collectionId,e.onClose),u=(0,o.useCallback)((function(){window.open(t.url)}),[t.url]),m=t.url;return(0,h.jsxs)(r.u,{isOpen:!0,onDismiss:n,children:[(0,h.jsxs)(i.K,{horizontal:!0,horizontalAlign:"space-between",children:[(0,h.jsx)("h3",{style:b,children:"Image viewer"}),(0,h.jsx)(a.h,{styles:y,iconProps:g,ariaLabel:"Close popup modal",onClick:n})]}),(0,h.jsx)(l.Z,{}),(0,h.jsxs)("div",{style:k,children:[(0,h.jsx)(i.K,{horizontal:!0,horizontalAlign:"start",tokens:v,verticalAlign:"center",children:(0,h.jsx)(s._,{children:"Share:"})}),(0,h.jsxs)(i.K,{horizontal:!0,horizontalAlign:"start",tokens:v,verticalAlign:"center",children:[(0,h.jsx)("div",{style:j,children:(0,h.jsx)("code",{children:m})}),(0,h.jsx)(a.h,{title:"Download image",iconProps:f,onClick:u})]})]}),(0,h.jsx)(c.E,{src:t.url,styles:x,alt:"Timelapse Image",imageFit:d.kQ.contain})]})},p=(0,u.gh)(),g={iconName:"Cancel"},f={iconName:"Download"},v={childrenGap:5},y={root:{color:p.palette.neutralPrimary,marginTop:12,marginRight:4},rootHovered:{color:p.palette.neutralDark}},x={root:{display:"flex",margin:10,minHeight:"50vh",backgroundColor:p.palette.neutralLighter},image:{maxWidth:"80vw",maxHeight:"80vh",marginLeft:"auto",marginRight:"auto",height:"auto",width:"auto"}},b={marginLeft:10,marginBottom:5},j={border:"1px solid ".concat(p.palette.neutralLight),borderRadius:4,padding:4},k={margin:"0 10px"};t.default=m},26783:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return xs}});var o=n(5813),r=(n(45778),n(94677)),i=n(22167),a=n(39567),l=n(99504),s=n(44669),c=n(23768),d=n(65579),u=n(55113),h=(0,l.oM)({name:"animations",initialState:{animations:{},settings:{}},reducers:{addAnimation:function(e,t){var n=e.animations[t.payload.collectionId]||[];n.push(t.payload.image),e.animations[t.payload.collectionId]=n},removeAnimation:function(e,t){var n=e.animations[t.payload.collectionId]||[],o=n.findIndex((function(e){return e.url===t.payload.image.url}));o>-1&&n.splice(o,1),e.animations[t.payload.collectionId]=n},updateAnimationSettings:function(e,t){e.settings[t.payload.collectionId]=t.payload.animationSettings}}}),m=h.actions,p=m.addAnimation,g=m.removeAnimation,f=m.updateAnimationSettings,v=h.reducer,y=function(e){return e.animation},x=function(e,t){return t},b=(0,u.P1)([y,x],(function(e,t){return t&&e.animations[t]||[]})),j=(0,u.P1)([y,x],(function(e,t){return e.settings[t||""]||{}})),k=(0,l.oM)({name:"Images",initialState:{images:{},settings:{}},reducers:{addImage:function(e,t){var n=e.images[t.payload.collectionId]||[];n.push(t.payload.image),e.images[t.payload.collectionId]=n},removeImage:function(e,t){var n=e.images[t.payload.collectionId]||[],o=n.findIndex((function(e){return e.url===t.payload.image.url}));o>-1&&n.splice(o,1),e.images[t.payload.collectionId]=n},updateImageSettings:function(e,t){e.settings[t.payload.collectionId]=t.payload.imageSettings}}}),C=k.actions,w=C.addImage,S=C.removeImage,Z=C.updateImageSettings,L=k.reducer,T=function(e){return e.image},z=function(e,t){return t},P=(0,u.P1)([T,z],(function(e,t){return t&&e.images[t]||[]})),I=(0,u.P1)([T,z],(function(e,t){return e.settings[t||""]||{}})),B=(0,l.xC)({reducer:{mosaic:s.ZP,map:c.ZP,detail:d.ZP,animation:v,image:L}}),D=n(48432),M=n(47591),_=n(29439),A=n(4519),R=n(70248),E=n(8510),q=n(77812),N=n(4942),O=n(82234),F=new R.control.StyleControl({mapStyles:["road","road_shaded_relief","grayscale_light","night","grayscale_dark","satellite","satellite_road_labels"]}),K=new R.source.DataSource,W=new R.source.DataSource,Y="stac-collection-line",V=new R.layer.LineLayer(W,Y,{strokeOpacity:.4,strokeColor:"#2b88d8",strokeWidth:2,strokeDashArray:[1,1,1],filter:["any",["==",["geometry-type"],"Polygon"],["==",["geometry-type"],"MultiPolygon"]]}),H=new R.layer.LineLayer(W,"stac-collection-outline",{strokeOpacity:.4,strokeColor:"#deecf9",strokeWidth:4,filter:["any",["==",["geometry-type"],"Polygon"],["==",["geometry-type"],"MultiPolygon"]]}),G="stac-item-line",U=new R.layer.LineLayer(K,G,{strokeColor:"rgb(0, 120, 212)",strokeWidth:2,filter:["any",["==",["geometry-type"],"Polygon"],["==",["geometry-type"],"MultiPolygon"]]}),Q="stac-item-outline",J=new R.layer.LineLayer(K,Q,{strokeColor:"#fff",strokeWidth:4,filter:["any",["==",["geometry-type"],"Polygon"],["==",["geometry-type"],"MultiPolygon"]]}),X=(new R.layer.PolygonLayer(K,"stac-item-fill",{fillColor:"rgba(255, 255, 255, 0.3)"}),new R.layer.PolygonLayer(K,"stac-hover-fill",{filter:["==",["get","id"],""],fillColor:"rgba(150, 50, 255, 0.9)"}),n(62822)),$="pc-mosaic-",ee=function(e,t){return"Tile"===t&&null!==e&&void 0!==e&&e.startsWith(O.ow)?{headers:(0,N.Z)({},O.sM,O.vj)}:{headers:{},url:e}},te=function(e){return"".concat($).concat(e)},ne=function(e){return"".concat(e,"-ds")},oe=function(e){return"".concat(e,"-outline")},re=function(e){return"".concat(e,"-heatmap")},ie=function(e,t){var n=(0,E._)((function(e){return e})).detail,o=(0,E._)((function(e){return e.mosaic})),r=o.layers,i=o.layerOrder,a=o.currentEditingLayerId,l=n.display.showSelectedItemAsLayer?n.selectedItem:null,s=Boolean(l);(0,A.useEffect)((function(){if(e.current&&t){var n=e.current;i.map((function(e,t,n){return[te(e),t<n.length-1?te(n[t+1]):null]})).forEach((function(e){var t=(0,_.Z)(e,2),o=t[0],r=t[1];if(o&&r&&n.layers.getLayerById(o)&&n.layers.getLayerById(r)){var i=function(e,t){return[e,oe(e),re(e)].map((function(e){return t.layers.getLayerById(e)})).filter(Boolean)}(r,n);i.forEach((function(e){n.layers.move(e,o)}))}}))}}),[i,t,e]),(0,A.useEffect)((function(){if(e.current&&t){var n=e.current;i.slice().reverse().forEach((function(e){var t=r[e],o=te(e),i=t.renderOption,c=n.layers.getLayerById(o);i&&(i.type===q.F5.tile?function(e,t,n,o,r,i,a,l){var s=n,c=l.collection,d=l.renderOption,u=l.query,h=!!o&&r===i;if((Boolean(u.searchId)||o)&&d){var m={tileUrl:(0,X._x)(u,d,c,h?a:null),visible:l.layer.visible,opacity:l.layer.opacity/100};if(s)s.setOptions(m);else{var p=new R.layer.TileLayer(m,t);e.layers.add(p,Q)}}else s&&s.setOptions({visible:!1})}(n,o,c,s,e,a,l,t):i.type===q.F5.polygon&&function(e,t,n,o){var r=o.collection,i=o.renderOption,a=t,l=null!==i&&null!==r;if(null===(null===i||void 0===i?void 0:i.vectorOptions))throw new Error("Missing vectorOptions for layer render option");if(l){var s,c,d,u,h,m={sourceLayer:null===(s=i.vectorOptions)||void 0===s?void 0:s.sourceLayer,fillColor:(null===(c=i.vectorOptions)||void 0===c?void 0:c.fillColor)||"#000",visible:o.layer.visible,fillOpacity:o.layer.opacity/100},p={sourceLayer:null===(d=i.vectorOptions)||void 0===d?void 0:d.sourceLayer,strokeColor:(null===(u=i.vectorOptions)||void 0===u?void 0:u.strokeColor)||"black",strokeWidth:(null===(h=i.vectorOptions)||void 0===h?void 0:h.strokeWidth)||1,minZoom:13,filter:["any",["==",["geometry-type"],"Polygon"],["==",["geometry-type"],"MultiPolygon"]],visible:o.layer.visible,strokeOpacity:o.layer.opacity/100};if(a){a.setOptions(m);var g=e.layers.getLayerById(oe(n));g&&g.setOptions(p)}else{var f=ne(n),v=new R.source.VectorTileSource(f,{url:(0,X.XO)(r,i)}),y=new R.layer.PolygonLayer(v,n,m),x=new R.layer.LineLayer(v,oe(n),p);e.sources.add(v),e.layers.add(x,Q),e.layers.add(y,x)}}}(n,c,o,t))})),n.layers.getLayers().filter((function(e){return e.getId().startsWith($)})).forEach((function(e){var t=e.getId();if(t.substring($.length)in r===!1&&!t.endsWith("-outline")&&!t.endsWith("-heatmap")){n.layers.remove(e);var o=n.layers.getLayerById(oe(t));o&&n.layers.remove(o);var i=n.layers.getLayerById(re(t));i&&n.layers.remove(i);var a=ne(t),l=n.sources.getById(a);l&&n.sources.remove(l)}}))}}),[e,t,l,s,i,r,a])},ae=n(86915),le=n(72083),se=function(e,t){var n=(0,E._)(s.Wq).collection,o=(0,E._)((function(e){return e.map})),r=o.showCollectionOutline,i=o.zoom;(0,A.useEffect)((function(){var n=e.current;t&&n&&(n.sources.getSources().includes(W)||(n.sources.add(W),n.layers.add(V,U),n.layers.add(H,V)))}),[e,t]),(0,A.useEffect)((function(){var e=null===n||void 0===n?void 0:n.extent.spatial.bbox;if(e){W.clear();var t=(0,le.e)(e);t&&W.add(t);var o=r&&i<=ae.jt;V.setOptions({visible:o}),H.setOptions({visible:o})}else W.clear()}),[e,n,r,i])},ce=function(e,t){var n,o=(0,E._)((function(e){return e})),r=o.map.boundaryShape,i=o.detail,a=null!==r&&void 0!==r?r:null===(n=i.selectedItem)||void 0===n?void 0:n.geometry,l=i.display;(0,A.useEffect)((function(){var n=e.current;t&&n&&(n.sources.getSources().includes(K)||(n.sources.add(K),n.layers.add(U,"labels"),n.layers.add(J,U)))}),[e,t]),(0,A.useEffect)((function(){if(a){var t,n=a;if(K.clear(),K.add(n),l.showSelectedItemAsLayer&&l.zoomToItem)null===(t=e.current)||void 0===t||t.setCamera({bounds:R.data.BoundingBox.fromData(n),padding:100,duration:500,type:"ease"})}else K.clear()}),[e,a,l.showSelectedItemAsLayer,l.zoomToItem])},de=function(e,t){(0,A.useEffect)((function(){var n=e.current;if(t&&n){var o=[new R.control.CompassControl,new R.control.ZoomControl,F];n.controls.getControls().length<o.length&&n.controls.add(o,{position:R.ControlPosition.TopRight})}}),[t,e])},ue=n(86460),he=function(e){var t=(0,E.Y)(),n=(0,ue.Z)(),o=n.height,r=n.width,i=(0,A.useState)(!1),a=(0,_.Z)(i,2),l=a[0],s=a[1],d=(0,E._)((function(e){return e.mosaic.layerOrder})),u=te(d[d.length-1]);return(0,A.useEffect)((function(){setTimeout((function(){var t;null===(t=e.current)||void 0===t||t.resize()}),100)}),[o,r,e]),{onMapMove:(0,A.useCallback)((function(e){var n=e.map.getCamera();t((0,c.GR)(n))}),[t]),onStyleDataLoaded:(0,A.useCallback)((function(e){if("style"===e.dataType){var t=e.map.layers;if("base"!==t.getLayers()[0].getId()){var n=t.getLayerById(G);n&&(t.move(G,"labels"),t.move(Q,G)),t.getLayerById(Y)&&(t.move(V,"labels"),t.move(H,V));var o=t.getLayerById(u);n&&o&&t.move(o,G);var r=t.getLayers()[0].getId();"base"!==r&&t.move("base",r)}}}),[u]),onDataEvent:(0,A.useCallback)((function(e){var t=e.map,n=e.isSourceLoaded,o=e.source,r=e.tile;t.areTilesLoaded()&&n&&void 0===o&&r?s(!1):!t.areTilesLoaded()&&void 0===o&&r&&s(!0)}),[]),areTilesLoading:l}},me=n(74797),pe=n(71778),ge=function(e){var t,n=(0,E.Y)(),o=(0,E._)((function(e){return e})),r=o.detail,i=o.map,a=i.center,l=i.zoom,c=i.bounds,d=i.showSidebar,u=(0,E._)(s.Wq),h=r.display.showSelectedItemAsLayer?r.selectedItem:null,m=(0,pe.Z_)(u.query,u.renderOption,u.collection,h).data,p=e.current,g=(null===(t=u.renderOption)||void 0===t?void 0:t.minZoom)||(null===m||void 0===m?void 0:m.minzoom)||ae.Xe;(0,A.useEffect)((function(){g&&n((0,s.N2)(g))}),[n,g]),(0,A.useEffect)((function(){p&&l!==p.getCamera().zoom&&p.setCamera({zoom:l,center:a,type:"ease",duration:750})}),[l,a,p]),(0,A.useEffect)((function(){if(p)try{var e;c&&c[0]!==(null===(e=p.getCamera().bounds)||void 0===e?void 0:e[0])&&p.setCamera({bounds:c,padding:20,type:"jump"})}catch(t){console.error(t)}}),[c,p]),(0,A.useEffect)((function(){p&&setTimeout((function(){p.resize()}),350)}),[p,d])},fe=n(66406),ve=n(32719),ye=n(4476),xe=n(17928),be=(0,xe.gh)(),je=n(65004),ke=n(47138),Ce=n(2556),we=function(e){var t=e.children;return(0,Ce.jsx)("div",{className:"explorer-map-component",style:Ze,children:t})},Se=(0,xe.gh)(),Ze={position:"absolute",top:10,left:"50%",transform:"translate(-50%, 0)",zIndex:1,padding:"7px 10px",borderRadius:5,border:"1px solid",borderColor:Se.semanticColors.primaryButtonBorder,backgroundColor:Se.semanticColors.bodyBackground,boxShadow:Se.effects.elevation16},Le=function(e){var t=e.onClick,n=e.layerVisibility;return Boolean(n.current)?(0,Ce.jsx)(we,{children:(0,Ce.jsxs)(je.x,{block:!0,style:{textAlign:"center"},children:[(0,Ce.jsx)(ke.r,{onClick:t,children:"Zoom in"})," to see search results"]})}):null},Te=function(e){var t=e.onClick,n=(0,E._)(s.Wq).collection;return(0,Ce.jsx)(we,{children:(0,Ce.jsxs)(i.K,{horizontalAlign:"center",styles:{root:{textAlign:"center"}},children:[(0,Ce.jsx)(je.x,{block:!0,children:"This area doesn't include data from"}),(0,Ce.jsx)(je.x,{block:!0,styles:{root:{fontStyle:"italic"}},children:null===n||void 0===n?void 0:n.title}),(0,Ce.jsxs)(je.x,{block:!0,styles:{root:{paddingTop:5}},children:[(0,Ce.jsx)(ke.r,{onClick:t,children:"Zoom to"})," the valid extent."]})]})})},ze=n(82546),Pe=n(1413),Ie=n(59643),Be=n(40827),De=n(25094),Me=n(37336),_e=n(39513),Ae=A.forwardRef((function(e,t){var n=e.label,o=e.iconName,r=e.children,a=e.top,l=void 0===a?void 0:a,s=e.bottom,c=void 0===s?void 0:s,d=e.left,u=void 0===d?void 0:d,h=e.right,m=void 0===h?2:h,p=(0,Me.k)(!1),g=(0,_.Z)(p,2),f=g[0],v=g[1].toggle,y=(0,_e.M)("callout-button"),x=u?void 0:m,b=(0,Pe.Z)({top:l,bottom:c,left:u,right:x},qe);(0,A.useImperativeHandle)(t,(function(){return{togglePanel:function(){v()}}}));var j=u?Ie.b.rightTopEdge:Ie.b.leftTopEdge;return(0,Ce.jsxs)(i.K,{style:b,className:"explorer-map-component",children:[(0,Ce.jsx)(Be.h,{id:y,ariaLabel:n,title:n,styles:Oe,className:"azure-maps-control-button",iconProps:{iconName:o},onClick:v}),f&&(0,Ce.jsx)(De.U,{styles:Ne,directionalHint:j,onDismiss:v,target:"#".concat(y),isBeakVisible:!1,setInitialFocus:!0,children:r})]})})),Re=Ae,Ee=(0,xe.gh)(),qe={zIndex:1,position:"absolute",display:"flex",margin:8,background:Ee.semanticColors.bodyBackground,borderCollapse:"collapse",borderRadius:Ee.effects.roundedCorner2,boxShadow:"rgb(0 0 0 / 16%) 0 0 4px"},Ne={calloutMain:{width:320,padding:"6px 6px"}},Oe={icon:{color:Ee.semanticColors.bodyText,width:20,height:20,lineHeight:20,fontSize:20,selectors:{svg:{fill:Ee.semanticColors.bodyText}}}},Fe=n(43144),Ke=n(15671),We=n(60136),Ye=n(27277),Ve=function(e){(0,We.Z)(n,e);var t=(0,Ye.Z)(n);function n(){return(0,Ke.Z)(this,n),t.apply(this,arguments)}return(0,Fe.Z)(n)}(n(16612).Y),He=n(74165),Ge=n(15861),Ue=n(56787),Qe=n.n(Ue),Je=n(84990),Xe=R.getDomain(),$e=function(e,t){var n=(0,r.F)(),o=(0,E.Y)(),i=(0,A.useCallback)((function(t){if(!t)return null;var n=R.data.BoundingBox.fromLatLngs([t.viewport.btmRightPoint,t.viewport.topLeftPoint]);return o((0,c.GR)({bounds:n,padding:20})),e(),null}),[o,e]),a=function(){var e=(0,Ge.Z)((0,He.Z)().mark((function e(n){var o,r,i;return(0,He.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t.current||(0,Je.Z)(n)||n.length<=2)){e.next=2;break}return e.abrupt("return",[]);case 2:if(o="https://".concat(Xe,"/search/").concat("fuzzy","/json?typeahead=true&api-version=1&query=").concat(n),(r=t.current.authentication.signRequest({url:o})).url){e.next=6;break}return e.abrupt("return",[]);case 6:return e.prev=6,e.next=9,Qe().get(r.url,{headers:r.headers});case 9:return i=e.sent,e.abrupt("return",i.data.results);case 13:return e.prev=13,e.t0=e.catch(6),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}(),l=function(e){return"".concat(e.freeformAddress,", ").concat(e.countryCodeISO3," ")};return{renderItem:function(e){var t=e.item;return(0,Ce.jsx)("span",{children:t.address.freeformAddress})},renderSuggestion:function(e){var t,o={padding:6},r=null;switch(e.type){case"Geography":case"Street":default:r=(0,Ce.jsx)(je.x,{style:o,children:l(e.address)});break;case"POI":r=(0,Ce.jsxs)(Ce.Fragment,{children:[(0,Ce.jsx)(je.x,{style:o,children:null===(t=e.poi)||void 0===t?void 0:t.name})," ",(0,Ce.jsx)(je.x,{styles:{root:{color:n.palette.neutralSecondary,fontSize:xe.TS.smallPlus}},children:l(e.address)})]})}return r},handleItemSelected:i,resolveSuggestions:a}},et=function(e){var t=e.mapRef,n=(0,A.useRef)(null),o=(0,A.useCallback)((function(){var e;null===(e=n.current)||void 0===e||e.togglePanel()}),[]),r=$e(o,t);return(0,Ce.jsxs)(Re,{ref:n,label:"Search for places on the map",top:142,iconName:"FluentSearch",children:[(0,Ce.jsx)(je.x,{block:!0,styles:{root:{fontWeight:xe.lq.bold}},children:"Place Finder"}),(0,Ce.jsx)(je.x,{block:!0,children:"Find and navigate to an address, place, or region"}),(0,Ce.jsx)(ze.Z,{}),(0,Ce.jsx)(Ve,{inputProps:{placeholder:"Search for place or address"},resolveDelay:300,pickerSuggestionsProps:{suggestionsHeaderText:"Suggested locations",noResultsFoundText:"Sorry, nothing matched your search ",searchingText:"Searching..."},onResolveSuggestions:r.resolveSuggestions,onRenderSuggestionsItem:r.renderSuggestion,onRenderItem:r.renderItem,onItemSelected:r.handleItemSelected})]})},tt=n(26953),nt=n(76451),ot=function(){var e=(0,E.Y)(),t=(0,E._)((function(e){return e.map})),n=t.showCollectionOutline,o=t.zoom>ae.jt;return(0,Ce.jsxs)(a.v,{children:[(0,Ce.jsx)(nt.X,{label:"Show current dataset extent",disabled:o,checked:n,onChange:function(t,n){return e((0,c.gK)(n||!1))}}),o&&(0,Ce.jsx)(je.x,{styles:{root:{fontSize:xe.TS.small}},children:"* Option not available at current zoom level"})]})},rt=function(e){var t=e.mapRef,n=(0,A.useState)(ae.mI),o=(0,_.Z)(n,2),r=o[0],a=o[1],l=(0,A.useState)(!0),s=(0,_.Z)(l,2),c=s[0],d=s[1];(0,A.useEffect)((function(){var e=c?"visible":"none";null!==t&&void 0!==t&&t.current&&t.current.map.getStyle().layers.forEach((function(n){"symbol"===n.type&&"vectorTiles"===n.source&&n.layout&&n.layout["text-field"]&&""!==n.layout["text-field"]&&t.current.map.setLayoutProperty(n.id,"visibility",e)}))}),[c,r,t]),(0,A.useEffect)((function(){var e;null===(e=t.current)||void 0===e||e.events.add("styledata",(function(e){"style"===e.dataType&&a(e.map.getStyle().style||"")}))}),[t]);return(0,Ce.jsx)(Re,{label:"Manage map settings",iconName:"FluentSettingsFilled",top:178,children:(0,Ce.jsxs)(i.K,{tokens:{childrenGap:10},styles:{root:{padding:4}},children:[(0,Ce.jsx)(nt.X,{label:"Show map labels",checked:c,onChange:function(e,t){return d(t||!1)}}),(0,Ce.jsx)(ot,{})]})})},it=n(9069),at=n(27927),lt=n(63957),st=n(57035),ct=n(80298),dt=n(25420),ut=n(21280),ht=n(87112),mt="".concat(O.ow,"/legend/colormap"),pt="".concat(O.ow,"/legend/classmap"),gt="".concat(O.ow,"/legend/interval"),ft=function(){var e=(0,Ge.Z)((0,He.Z)().mark((function e(t){var n,o,r,i,a,l;return(0,He.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,_.Z)(t.queryKey,3),o=n[0],r=n[1],i=n[2],a=i?"?"+at.stringify({trim_start:i.trimStart,trim_end:i.trimEnd},{skipNull:!0}):"",l="classmap"===o?pt:gt,e.next=5,pe.U6.get("".concat(l,"/").concat(r).concat(a));case 5:return e.next=7,e.sent.data;case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vt=function(e){var t=e.params,n=e.legendConfig,o=yt(t.colormap_name,n),r=xt(t.rescale,null===n||void 0===n?void 0:n.labels);return(0,Ce.jsxs)(i.K,{children:[o,r]})},yt=function(e,t){var n=(0,lt.Z)(!0),o=(0,_.Z)(n,2),r=o[0],i=o[1],a=(0,A.useCallback)((function(e){i(e===st.U9.notLoaded)}),[i]);if(!e)return null;var l={height:.08,width:4.1,trim_start:null===t||void 0===t?void 0:t.trimStart,trim_end:null===t||void 0===t?void 0:t.trimEnd};return(0,Ce.jsxs)(Ce.Fragment,{children:[r&&(0,Ce.jsx)(ct.q,{shimmerElements:[{type:dt.s.line,height:8,width:233}]}),(0,Ce.jsx)(ut.E,{styles:wt,src:"".concat(mt,"/").concat(e,"?").concat(at.stringify(l,{skipNull:!0})),onLoadingStateChange:a,alt:"Legend color ramp using ".concat(e)})]})},xt=function(e,t){var n=t?bt(t):jt(e);return(0,Ce.jsx)(i.K,{horizontal:!0,horizontalAlign:"space-between",children:n})},bt=function(e){return e.map((function(e,t){var n="legend-scale-".concat(t);return(0,Ce.jsx)(je.x,{styles:Ct,children:e},n)}))},jt=function(e){if(!e)return null;var t=Array.isArray(e)?e:e.split(",");if(!t||2!==t.filter(Boolean).length)return null;var n=t.map((function(e){return parseFloat(e)})),o=(0,_.Z)(n,2),r=o[0],i=o[1],a=(r+i)/2;return(0,Ce.jsxs)(Ce.Fragment,{children:[(0,Ce.jsx)(je.x,{styles:Ct,children:r}),(0,Ce.jsx)(je.x,{styles:Ct,children:a}),(0,Ce.jsx)(je.x,{styles:Ct,children:i})]})},kt=(0,xe.gh)(),Ct={root:{fontSize:xe.TS.small}},wt={image:{width:"100%",borderRadius:4,borderWidth:.5,borderColor:kt.palette.neutralQuaternary,borderStyle:"solid"}},St=(0,xe.gh)(),Zt=function(e){var t=e.color;return(0,Ce.jsx)("div",{style:{backgroundColor:"rgba(".concat(t.join(","),") "),width:10,height:10,borderRadius:"50%",borderWidth:.5,borderStyle:"solid",borderColor:St.palette.neutralQuaternary}})},Lt=function(e){var t=e.params,n=e.collection,o=e.legendConfig,r=Array.isArray(t.colormap_name)?t.colormap_name[0]:t.colormap_name,l=function(e,t){return(0,ht.useQuery)(["classmap",e,t],ft,{refetchOnWindowFocus:!1,refetchOnMount:!1,enabled:Boolean(e)})}(r,o),s=l.isLoading,c=l.data,d=r?c:t.colormap&&JSON.parse(t.colormap),u=s&&(0,Ce.jsx)(ct.q,{shimmerElements:[{type:dt.s.line,height:20,width:233}]}),h=Array.isArray(t.assets)?t.assets[0]:t.assets;if(!h)return null;var m=null===n||void 0===n?void 0:n.item_assets[h];if(!m)return null;var p,g=m["classification:classes"]||(null===(p=m["file:values"])||void 0===p?void 0:p.map((function(e){return{value:e.values[0],description:e.summary}})));if(!g)return null;var f=d?Object.keys(d).map((function(e){var t=d[e],n=function(e,t){var n=t.find((function(t){return t.value===Number(e)}));return null===n||void 0===n?void 0:n.description}(e,g),o="legend-class-".concat(e);return n&&(0,Ce.jsxs)(i.K,{horizontal:!0,verticalAlign:"center",tokens:Tt,children:[(0,Ce.jsx)(a.v,{shrink:0,children:(0,Ce.jsx)(Zt,{color:t})}),(0,Ce.jsx)(je.x,{styles:Pt,children:n})]},o)})):null;return(0,Ce.jsxs)(a.v,{styles:It,className:"custom-overflow",children:[u,(0,Ce.jsx)(i.K,{tokens:zt,children:f})]})},Tt={childrenGap:5},zt={childrenGap:3},Pt={root:{fontSize:xe.TS.smallPlus}},It={root:{maxHeight:150,overflowY:"auto",overflowX:"hidden"}},Bt=n(47223),Dt=function(e){var t,n,o=e.layer,r=e.children,i=(0,E.Y)(),a=(0,A.useState)(!1),l=(0,_.Z)(a,2),c=l[0],d=l[1],u=(0,_e.M)("opacity-button");return(0,Ce.jsxs)(Ce.Fragment,{children:[(0,Ce.jsx)(Be.h,{id:u,checked:c,title:"Adjust layer opacity","aria-label":"Set ".concat(null===(t=o.collection)||void 0===t?void 0:t.title," ").concat(null===(n=o.renderOption)||void 0===n?void 0:n.name," opacity"),iconProps:{iconName:"CircleHalfFull"},styles:100===o.layer.opacity?Ft:Kt,onClick:function(){return d(!c)}}),c&&(0,Ce.jsxs)(De.U,{target:"#".concat(u),gapSpace:5,isBeakVisible:!1,directionalHint:Ie.b.topAutoEdge,onDismiss:function(){return d(!1)},setInitialFocus:!0,children:[(0,Ce.jsx)(Bt.i,{label:"Layer opacity","aria-label":"Layer opacity",min:0,max:100,step:1,value:o.layer.opacity,onChange:function(e){var t=o.layerId;t&&i((0,s.j5)({id:t,value:e}))},showValue:!1,styles:_t}),r]})]})},Mt=(0,xe.gh)(),_t={root:{width:175,padding:10},titleLabel:{fontSize:xe.TS.size12},activeSection:{background:Mt.palette.themePrimary},inactiveSection:{background:Mt.palette.themeLighter}},At=function(e){var t=e.layer,n=t.layerId,o=t.isPinned,r=(0,E.Y)(),i=(0,E._)((function(e){return e.mosaic})),a=i.currentEditingLayerId,l=i.layerOrder,c=(0,E._)((function(e){return e.detail})).previewMode,d=n===a,u=(0,A.useCallback)((function(){a&&r((0,s.hh)())}),[a,r]),h=(0,A.useCallback)((function(){u(),r((0,s.Aq)(n))}),[r,u,n]),m=(0,A.useCallback)((function(){r((0,s.kU)(n))}),[r,n]),p=(0,A.useCallback)((function(){r((0,s.Um)(n))}),[r,n]),g=l[0]!==n,f=l[l.length-1]!==n,v=(0,A.useMemo)((function(){return o&&!d?{key:"re-edit",text:"Edit layer and filter options",iconProps:{iconName:"Edit"},onClick:h,disabled:c.enabled}:{key:"re-pin",text:"Stop editing",iconProps:{iconName:"PencilReply"},onClick:u,disabled:c.enabled}}),[h,u,d,o,c.enabled]),y=(0,A.useMemo)((function(){return{items:[v,{key:"moveup",text:"Move layer up",iconProps:{iconName:"Up"},disabled:!g,onClick:m},{key:"movedown",text:"Move layer down",iconProps:{iconName:"Down"},disabled:!f,onClick:p}],styles:{subComponentStyles:{menuItem:{linkContent:{fontSize:13},icon:{fontSize:13}}}}}}),[v,g,m,f,p]);return(0,Ce.jsx)(Be.h,{role:"menuitem","aria-label":"More actions",title:"More actions",menuIconProps:Rt,menuProps:y,styles:Ft})},Rt={iconName:"MoreVertical"},Et=function(e){var t=e.layer,n=e.isExpanded,o=e.onExpandedChange,r=e.isExpandDisabled,a=void 0!==r&&r,l=(0,E.Y)(),c=qt.expand[n?"true":"false"],d=qt.view[t.layer.visible?"true":"false"],u=(0,Ce.jsx)(Dt,{layer:t}),h=(0,Ce.jsx)(Be.h,{role:"menuitem","aria-label":d.title,title:d.title,iconProps:{iconName:d.icon},onClick:function(){l((0,s.bS)({id:t.layerId,value:!t.layer.visible}))},styles:Ft});return(0,Ce.jsxs)(i.K,{horizontal:!0,horizontalAlign:"center",tokens:Ot,role:"menubar","aria-orientation":"horizontal",children:[h,u,(0,Ce.jsx)(Be.h,{"aria-label":c.title,title:c.title,disabled:a,iconProps:{iconName:c.icon},onClick:function(){return o(!n)},styles:Ft}),(0,Ce.jsx)(At,{layer:t})]})},qt={expand:{true:{icon:"ChevronDown",title:"Collapse legend"},false:{icon:"ChevronUp",title:"Expand legend"}},view:{true:{icon:"FluentView",title:"Hide layer from map"},false:{icon:"FluentUnview",title:"Show layer on map"}}},Nt=(0,xe.gh)(),Ot={childrenGap:2},Ft={root:{width:18,height:18,padding:2},rootHasMenu:{width:18,height:18,padding:2},icon:{color:Nt.palette.neutralSecondaryAlt,fontSize:xe.TS.small,width:16},menuIcon:{color:Nt.palette.neutralSecondaryAlt,fontSize:xe.TS.small,width:16}},Kt=(0,xe.ZC)(Ft,{icon:{color:Nt.palette.themePrimary}}),Wt=function(e){var t,n,o,r=e.params,l=e.legendConfig,s=r.colormap_name&&Array.isArray(r.colormap_name)?r.colormap_name[0]:r.colormap_name,c=(n=s,o=l,(0,ht.useQuery)(["interval",n,o],ft,{refetchOnWindowFocus:!1,refetchOnMount:!1,enabled:Boolean(n)})),d=c.isLoading,u=c.data,h=s?u:r.colormap&&JSON.parse(r.colormap),m=d&&(0,Ce.jsx)(ct.q,{shimmerElements:[{type:dt.s.line,height:20,width:233}]}),p=null!==(t=null===l||void 0===l?void 0:l.scaleFactor)&&void 0!==t?t:1;return(0,Ce.jsxs)(a.v,{styles:It,className:"custom-overflow",children:[m,(0,Ce.jsx)(i.K,{tokens:zt,children:h&&Yt(h,p)})]})},Yt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.map((function(e){var n=(0,_.Z)(e,2),o=(0,_.Z)(n[0],2),r=o[0],l=o[1],s=n[1],c=(r*t).toLocaleString(),d=(l*t).toLocaleString();return(0,Ce.jsx)(a.v,{children:(0,Ce.jsxs)(i.K,{horizontal:!0,verticalAlign:"center",tokens:{childrenGap:5},children:[(0,Ce.jsx)(Zt,{color:s}),(0,Ce.jsx)(je.x,{styles:Pt,children:"".concat(c," \u2013 ").concat(d)})]})},"interval-".concat(r,"-").concat(l))}))},Vt=function(e){var t=e.layer,n=(0,E.Y)(),o=(0,E._)((function(e){return e.detail})).previewMode,r=t.isPinned?{icon:"FluentPinFilled",title:"Unpin layer and remove from map"}:{icon:"FluentPinOutline",title:"Pin layer to map and perform new search"},a=(0,Ce.jsx)(Be.h,{"aria-label":r.title,title:r.title,iconProps:{iconName:r.icon},onClick:function(){var e=t.layerId,o=t.isPinned;n(o?(0,s.lW)(e):(0,s.hh)())},styles:Gt,disabled:o.enabled});return(0,Ce.jsx)(i.K,{horizontal:!0,horizontalAlign:"center",children:a})},Ht=(0,xe.gh)(),Gt={root:{width:18,height:18,padding:"0px 12px 0px 16px"},rootDisabled:{background:Ht.semanticColors.bodyBackground},rootHovered:{background:Ht.semanticColors.bodyBackground},iconDisabled:{backgroundColor:Ht.semanticColors.bodyBackground,"& svg path":{fill:Ht.semanticColors.buttonBackgroundDisabled}}},Ut=function(e){var t=e.layer,n=(0,E._)((function(e){return e.map})).zoom,o=(0,A.useState)(!0),r=(0,_.Z)(o,2),a=r[0],l=r[1],s=t.renderOption,c=t.collection;if(!s)return null;var d=at.parse(s.options||""),u=s.legend,h=n+.5>=t.layer.minZoom,m=h?an:ln,p=h?"":"Layer not visible at this zoom level. ",g=Qt(d,u,c),f=t.isCustomQuery?"Custom":t.query.name,v="".concat(f," | ").concat(s.name),y=(0,Ce.jsx)(je.x,{block:!0,nowrap:!0,styles:m.subHeader,title:p||v,children:v});return(0,Ce.jsxs)(Ce.Fragment,{children:[(0,Ce.jsxs)(i.K,{horizontal:!0,children:[(0,Ce.jsx)(Vt,{layer:t}),(0,Ce.jsxs)(i.K,{tokens:Xt,styles:$t,grow:!0,children:[(0,Ce.jsxs)(i.K,{horizontal:!0,horizontalAlign:"space-between",children:[(0,Ce.jsx)(i.K,{horizontal:!0,horizontalAlign:"start",verticalAlign:"start",children:(0,Ce.jsx)(je.x,{block:!0,nowrap:!0,styles:m.header,title:p||(null===c||void 0===c?void 0:c.title),children:null===c||void 0===c?void 0:c.title})}),(0,Ce.jsx)(Et,{layer:t,isExpanded:a,onExpandedChange:function(e){l(e)},isExpandDisabled:!g})]}),(0,Ce.jsx)("div",{style:en,children:y}),a&&(0,Ce.jsx)("div",{style:en,children:g})]})]}),(0,Ce.jsx)(ze.Z,{className:"legend-item-separator",styles:sn})]})},Qt=function(e,t,n){if(t)switch(t.type){case q.B_.classmap:return(0,Ce.jsx)(Lt,{params:e,collection:n,legendConfig:t});case q.B_.continuous:return(0,Ce.jsx)(vt,{params:e,legendConfig:t});case q.B_.interval:return(0,Ce.jsx)(Wt,{params:e,legendConfig:t});case q.B_.none:return null;default:throw new Error("Unknown legend type: ".concat(t.type))}return"rescale"in e?(0,Ce.jsx)(vt,{params:e,legendConfig:t}):function(e,t){if(!t)return!1;if(Array.isArray(t)||t.includes(","))return!1;var n=e&&"file:values"in e.item_assets[t],o=e&&"classification:classes"in e.item_assets[t];return n||o}(n,e.assets)?(0,Ce.jsx)(Lt,{params:e,collection:n,legendConfig:t}):null},Jt=(0,xe.gh)(),Xt={childrenGap:6},$t={root:{paddingLeft:2,paddingRight:6}},en={paddingLeft:1},tn={root:{fontWeight:xe.lq.semibold,maxWidth:250}},nn={root:{color:Jt.semanticColors.disabledBodyText,fontStyle:"italic",fontWeight:xe.lq.semibold,maxWidth:250}},on={root:{fontSize:xe.TS.smallPlus,maxWidth:325}},rn={root:{fontSize:xe.TS.smallPlus,color:Jt.semanticColors.disabledBodyText,fontStyle:"italic",maxWidth:325}},an={header:tn,subHeader:on},ln={header:nn,subHeader:rn},sn={root:{fontSize:18,marginTop:2}},cn=function(){var e=(0,it.Z)("legend-control-open",!0),t=(0,_.Z)(e,2),n=t[0],o=t[1],r=(0,E._)((function(e){return e.mosaic})),a=r.layers,l=r.layerOrder.map((function(e){return e&&(0,Ce.jsx)(Ut,{layer:a[e]},"legend-".concat(e))})).filter(Boolean),s={display:n?"block":"none"},c=(0,Ce.jsx)(i.K,{styles:hn,style:s,tokens:un,"data-cy":"explore-legend",children:l}),d=n?"Hide Legend":"Open Legend",u=(0,Ce.jsx)("div",{style:pn,title:d,children:(0,Ce.jsx)("div",{children:(0,Ce.jsx)(Be.h,{ariaLabel:"Open legend",className:"azure-maps-control-button",styles:mn,iconProps:gn,onClick:function(){return o(!n)}})})});return l.length>0?(0,Ce.jsxs)("div",{className:"explorer-map-component",children:[c,u]}):null},dn=(0,xe.gh)(),un={childrenGap:2},hn={root:{background:dn.semanticColors.bodyBackground,padding:"10px 0px 10px 0px",borderRadius:2,position:"absolute",zIndex:1,bottom:75,right:10,boxShadow:"rgb(0 0 0 / 16%) 0 0 4px",width:370}},mn={icon:{color:dn.semanticColors.bodyText,width:18,height:18}},pn=(0,Pe.Z)({right:2,bottom:32},qe),gn={iconName:"Layer",styles:{root:{fill:"rgb(131, 136, 141)",width:20}}},fn=n(43710),vn=n(89636),yn=n(23229),xn=n(13556),bn=n(57547),jn=n(84506),kn=n(44121),Cn=n(73201),wn=n(44007),Sn=(n(86074),n(93433)),Zn=n(52415),Ln=function(e,t){return t.filter.args.find((function(t){var n;return(null===t||void 0===t||null===(n=t.args[ae.re])||void 0===n?void 0:n.property)===e}))},Tn=function(e,t){return t.filter.args.filter((function(t){return!e.includes(t.args[ae.re].property)}))},zn=function(e,t,n){if(!e)return{replace:{this:"",with:""},exp:null};var o=t.length;if(o<3)throw new Error("Variable name must be at least 3 characters long");var r="".padEnd(o-2,n),i=(0,Zn.Z)(e);return i.args[ae.pw]=r,{replace:{this:'"'.concat(r,'"'),with:t},exp:i}};Cn.Z.registerLanguage("python",wn.Z);var Pn=function(e){if(!e)return null;var t=function(e){var t=Ln("geometry",e),n=Ln("datetime",e),o=null===t||void 0===t?void 0:t.args[ae.pw],r=null===n||void 0===n?void 0:n.args[ae.pw],i=zn(t,"aoi","$"),a=zn(n,"daterange","^"),l=Tn(["geometry","datetime"],e),s=[null===i||void 0===i?void 0:i.exp,null===a||void 0===a?void 0:a.exp].concat((0,Sn.Z)(l)).filter(Boolean);return{datetime:(0,Pe.Z)((0,Pe.Z)({},a),{},{value:r}),aoi:(0,Pe.Z)((0,Pe.Z)({},i),{},{value:o}),fullBody:s}}(e);if(!t)return null;var n=t.aoi,o=t.datetime,r=t.fullBody,i=(0,kn.Z)({op:"and",args:r}).replace(n.replace.this,n.replace.with).replace(o.replace.this,o.replace.with),a=o.exp?"\n# Define your temporal range\ndaterange = ".concat((0,kn.Z)(o.value),"\n"):"",l='from pystac_client import Client\nimport planetary_computer as pc\n\n# Search against the Planetary Computer STAC API\ncatalog = Client.open(\n  "'.concat(O.ST,'"\n)\n\n# Define your area of interest\naoi = ').concat((0,kn.Z)(n.value),"\n").concat(a,'\n# Define your search with CQL2 syntax\nsearch = catalog.search(filter_lang="cql2-json", filter=').concat(i,")\n\n# Grab the first item from the search results and sign the assets\nfirst_item = next(search.get_items())\npc.sign_item(first_item).assets");return Cn.Z.highlight(l,{language:"python"})},In=function(e){var t=e.visible,n=e.buttonId,o=e.onDismiss,r=e.snippetType,l=void 0===r?"query":r,s=(0,_e.M)("callout-label"),c=(0,_e.M)("callout-description"),d=(0,yn.Z)(),u=(0,_.Z)(d,2),h=u[0],m=u[1],p=(0,A.useState)(!1),g=(0,_.Z)(p,2),f=g[0],v=g[1],y=(0,bn.Ue)(),x=(0,E._)((function(e){return e.detail.selectedItem})),b="query"===l?Pn(y):function(e){var t;if(!e)return null;var n=e.links.find((function(e){return"self"===e.rel}));if(!n)return null;var o=Object.entries(e.assets).filter((function(e){var t,n,o=(0,_.Z)(e,2)[1];return(null===(t=o.roles)||void 0===t?void 0:t.includes("data"))&&(null===(n=o.type)||void 0===n?void 0:n.includes("geotiff"))})),r=Boolean(null===(t=o)||void 0===t?void 0:t.length);r&&(o=Object.entries(e.assets).filter((function(e){var t;return null===(t=(0,_.Z)(e,2)[1].type)||void 0===t?void 0:t.includes("geotiff")})));var i=o,a=(0,jn.Z)(i),l=a[0],s=a.slice(1),c=null!==s&&void 0!==s&&s.length?"(other asset keys to use: ".concat(s.map((function(e){return"'".concat(e[0],"'")})).join(", "),")"):"",d=r?"signed_item = planetary_computer.sign(item)\n\n# Open one of the data assets ".concat(c,'\nasset_href = signed_item.assets["').concat(l[0],'"].href\nds = rioxarray.open_rasterio(asset_href)\nds\n'):"# No data assets in this item, show the STAC data\nitem\n",u='import pystac\nimport planetary_computer\nimport rioxarray\n\nitem_url = "'.concat(n.href,'"\n\n# Load the individual item metadata and sign the assets\nitem = pystac.Item.from_file(item_url)\n\n').concat(d,"\n");return Cn.Z.highlight(u,{language:"python"})}(x),j="query"===l?(0,Ce.jsx)(Ce.Fragment,{children:(0,Ce.jsxs)(je.x,{children:["Use the code below to recreate this search in the Planetary Computer Hub or other Python analytic environments. Read more about searching using the"," ",(0,Ce.jsx)(xn.Z,{href:"https://github.com/radiantearth/stac-api-spec/tree/master/fragments/filter#overview",children:"STAC API"}),"."]})}):"Use the code below to access this individual item's data assets.",k=h.value&&f,C=k?"SkypeCheck":"Copy",w=k?Bn.palette.green:Bn.palette.neutralPrimary,S=(0,A.useCallback)((function(){null!==b&&void 0!==b&&b.code&&(v(!0),m(b.code),setTimeout((function(){return v(!1)}),3e3))}),[m,b]);return t&&b?(0,Ce.jsx)(De.U,{ariaLabelledBy:s,ariaDescribedBy:c,role:"alertdialog",className:Dn.callout,gapSpace:6,target:"#".concat(n),onDismiss:o,setInitialFocus:!0,isBeakVisible:!1,directionalHint:Ie.b.rightBottomEdge,children:(0,Ce.jsxs)(i.K,{tokens:{childrenGap:6},children:[(0,Ce.jsx)(je.x,{block:!0,className:Dn.title,children:"Explore results"}),(0,Ce.jsx)(je.x,{children:j}),(0,Ce.jsx)(a.v,{children:(0,Ce.jsxs)(i.K,{horizontal:!0,horizontalAlign:"start",tokens:{childrenGap:6},children:[(0,Ce.jsx)(vn.a,{styles:{icon:{color:w}},iconProps:{iconName:C},onClick:S,children:"Copy"}),(0,Ce.jsx)(xn.Z,{As:fn.K,href:O.yu,title:"Open the Planetary Computer Hub",children:"Open Hub"})]})}),(0,Ce.jsx)(a.v,{children:(0,Ce.jsx)("div",{className:"input_area",style:{marginTop:6},children:(0,Ce.jsx)("pre",{dangerouslySetInnerHTML:{__html:b.value}})})})]})}):null},Bn=(0,xe.gh)(),Dn=(0,xe.ZC)({callout:{maxWidth:700,padding:"20px 24px",backgroundColor:Bn.semanticColors.bodyBackground},title:{fontSize:xe.TS.mediumPlus,fontWeight:xe.lq.semibold}}),Mn=function(){var e=(0,Me.k)(!1),t=(0,_.Z)(e,2),n=t[0],o=t[1].toggle,r=(0,_e.M)("callout-button");return(0,Ce.jsxs)(i.K,{className:"explorer-explore-in-hub",styles:An,children:[(0,Ce.jsx)(fn.K,{id:r,onClick:o,"data-cy":"explore-in-hub",children:"Explore results in the Hub"}),(0,Ce.jsx)(In,{buttonId:r,visible:n,onDismiss:o})]})},_n=(0,xe.gh)(),An={root:{marginTop:0,padding:8,borderTop:"1px solid",borderColor:_n.palette.neutralLighter,backgroundColor:_n.semanticColors.bodyBackground}},Rn=function(){var e=(0,E.Y)();return(0,Ce.jsx)(i.K,{className:"explorer-mobile-view-map",styles:An,children:(0,Ce.jsx)(fn.K,{styles:On,onClick:function(){e((0,c.vp)())},iconProps:Fn,children:"View map"})})},En=function(){var e=(0,E.Y)(),t=(0,E._)((function(e){return e.map})),n=t.showSidebar,o=t.sidebarPanel,r=(0,E._)((function(e){return e.detail})).previewMode;if(n||r.enabled)return null;var i=["animation","image"].includes(o)?"Config":"Search";return(0,Ce.jsxs)(fn.K,{className:"explorer-mobile-view-sidebar",styles:Nn,onClick:function(){e((0,c.vp)())},iconProps:qn,children:["View ",i]})},qn={iconName:"ChevronLeft"},Nn={root:{position:"absolute",bottom:10,left:10,zIndex:1,border:"1px solid darkgray"}},On={root:{margin:"auto",display:"block"}},Fn={iconName:"Nav2DMapView"},Kn=n(13568),Wn=n(61539),Yn=n(37921),Vn=function(e){var t,n,o,r=e.item,i=null===(t=r.properties)||void 0===t?void 0:t.datetime,a=[null===(n=r.properties)||void 0===n?void 0:n.start_datetime,null===(o=r.properties)||void 0===o?void 0:o.end_datetime].filter(Boolean);return a.length>0?(0,Ce.jsxs)("span",{title:"Acquired between",children:[(0,Yn.mb)(a[0],!1,!0)," \u2014"," ",(0,Yn.mb)(a[1],!1,!0)]}):(0,Ce.jsx)("span",{title:"Acquisition date (UTC)",children:(0,Yn.mb)(i)})},Hn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...";if(!e)return"";var o=e.toString();if(o.length<=t)return o;var r=Math.floor(t/2),i=o.substring(0,r),a=o.substring(o.length-r);return i+n+a},Gn=n(45384),Un=function(e){var t=e.item,n=e.mapRef,o=e.previewModeState,r=o.currentIndex,a=o.items,l=(0,E.Y)(),s=(0,E._)((function(e){return e.map})),c=s.previousZoom,u=s.previousCenter,h=!(0,Gn.Z)(r)&&r<a.length-1,m=!(0,Gn.Z)(r)&&r>0;return(0,Ce.jsxs)(i.K,{horizontal:!0,tokens:{childrenGap:2},horizontalAlign:"center",children:[(0,Ce.jsx)(Be.h,{title:"View previous search result item",ariaLabel:"View previous search result item",iconProps:{iconName:"ChevronLeftMed"},styles:Jn,disabled:!m,onClick:function(){l((0,d.Zi)())}}),(0,Ce.jsx)(Be.h,{title:"Zoom to original search extent",ariaLabel:"Zoom to original search extent",iconProps:{iconName:"FitPage"},styles:Xn,onClick:function(){var e;null===(e=n.current)||void 0===e||e.setCamera({zoom:c,center:u,type:"ease",duration:750})}}),(0,Ce.jsx)(Be.h,{title:"Zoom to item extent",ariaLabel:"Zoom to item extent",iconProps:{iconName:"ZoomToFit"},styles:Xn,onClick:function(){var e;null===(e=n.current)||void 0===e||e.setCamera({bounds:t.bbox,type:"ease",padding:50,duration:750})}}),(0,Ce.jsx)(Be.h,{title:"View next search result item",ariaLabel:"View next search result item",iconProps:{iconName:"ChevronRightMed"},styles:Jn,disabled:!h,onClick:function(){l((0,d.I9)())}})]})},Qn=(0,xe.gh)(),Jn={icon:{fontSize:13},rootDisabled:{backgroundColor:Qn.palette.neutralLighterAlt}},Xn={icon:{fontSize:16}},$n=function(e){var t=e.onClick,n=function(){t(!1)},o="Exit preview and keep current map extent",r={items:[{key:"close-current-bounds",text:o,onClick:n},{key:"close-original-bounds",text:"Exit and return to original search extent",onClick:function(){t(!0)}}]};return(0,Ce.jsx)(Be.h,{split:!0,title:o,ariaLabel:o,iconProps:{iconName:"Cancel"},menuProps:r,styles:to,onClick:n})},eo=(0,xe.gh)(),to={icon:{fontSize:12},root:{color:eo.semanticColors.bodyText},rootHovered:{color:eo.semanticColors.bodyText},menuIcon:{},menuIconHovered:{backgroundColor:eo.semanticColors.buttonBackgroundHovered},splitButtonMenuButton:{color:eo.semanticColors.bodyText,backgroundColor:eo.semanticColors.bodyBackground,border:"none",paddingRight:0},splitButtonMenuIcon:{fontSize:8,width:18},splitButtonDivider:{backgroundColor:"#c8c8c8",width:1,right:26,position:"absolute",top:4,bottom:4}},no=function(e){var t=e.mapRef,n=(0,E.Y)(),o=(0,E._)((function(e){return e.detail})),r=o.selectedItem,a=o.previewMode;if(!r||!a.enabled)return null;var l=(0,Ce.jsxs)(i.K,{horizontal:!0,horizontalAlign:"space-between",verticalAlign:"center",styles:io,children:[(0,Ce.jsxs)(i.K,{horizontal:!0,verticalAlign:"center",tokens:{childrenGap:4},children:[(0,Ce.jsx)(je.x,{block:!0,styles:ro,children:"Item preview"}),(0,Ce.jsx)(Kn.G,{content:"Item preview locks your current search and allows you visualize individual results on the map, rather than the default mosaic. Close out of preview mode to continue your search.",children:(0,Ce.jsx)(Wn.J,{iconName:"info",styles:ao})})]}),(0,Ce.jsx)($n,{onClick:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&n((0,c.Bx)()),n((0,d.YO)())}})]}),s=(0,Ce.jsxs)(i.K,{tokens:{childrenGap:4},children:[(0,Ce.jsx)(je.x,{block:!0,title:"Selected item id: ".concat(r.id),children:Hn(r.id)}),(0,Ce.jsx)("div",{style:{fontSize:13,color:oo.palette.neutralSecondary},children:(0,Ce.jsx)(Vn,{item:r})})]});return(0,Ce.jsxs)(we,{children:[l,(0,Ce.jsx)(ze.Z,{styles:lo}),s,(0,Ce.jsx)(Un,{item:r,mapRef:t,previewModeState:a})]})},oo=(0,xe.gh)(),ro={root:{textAlign:"left",fontWeight:500}},io={root:(0,N.Z)({minWidth:320},"@media(max-width: ".concat(O.P_,"px)"),{maxWidth:250})},ao={root:{cursor:"default",visibility:"hidden"}},lo={root:{padding:4},content:{display:"block"}},so="viewer-map",co=function(){var e=(0,A.useRef)(null),t=(0,E._)((function(e){return e.map})),n=t.center,o=t.zoom,r=t.showSidebar,i=(0,A.useState)(!1),a=(0,_.Z)(i,2),l=a[0],d=a[1],u=he(e);(0,A.useEffect)((function(){if(!e.current){var t=new R.Map(so,{view:"Auto",center:n,zoom:o,language:"en-US",showFeedbackLink:!1,showLogo:!1,style:ae.mI,renderWorldCopies:!0,authOptions:{authType:R.AuthenticationType.subscriptionKey,subscriptionKey:"-D4Ll1zRTXBEdU_VyqaS8y54He-W44IO8ZhsY4TlmI4"},transformRequest:ee});t.events.add("ready",(function(){d(!0)})),t.events.add("moveend",u.onMapMove),t.events.add("styledata",u.onStyleDataLoaded),t.events.add("data",u.onDataEvent),e.current=t}}),[n,o,u.onMapMove,u.onStyleDataLoaded,u.onDataEvent]),(0,A.useEffect)((function(){["#atlas-map-shortcuts","#atlas-map-style","#atlas-map-state"].forEach((function(e){var t=document.querySelectorAll(e);2===t.length&&t[1].remove()}))}),[l]),ce(e,l),se(e,l),ie(e,l),ge(e),de(e,l),(0,me.ZP)(),function(e,t){var n=(0,E.Y)(),o=(0,A.useRef)(null),r=(0,E._)((function(e){return e.map})),i=r.isDrawBboxMode,a=r.drawnShape;if(!o.current&&e.current&&t){var l,s=new ye.VO.DrawingManager(e.current,{shapeDraggingEnabled:!0,mode:ye.VO.DrawingMode.idle});null===(l=s.getLayers().polygonOutlineLayer)||void 0===l||l.setOptions({strokeColor:be.palette.themePrimary,strokeDashArray:[2,2],strokeWidth:4}),o.current=s}if(o.current&&e.current){var d,u,h=o.current.getOptions().mode;!a&&o.current.getSource().getShapes().length>0&&o.current.getSource().clear(),i&&h!==ye.VO.DrawingMode.drawRectangle&&(o.current.getSource().clear(),null===(d=o.current)||void 0===d||d.setOptions({mode:ye.VO.DrawingMode.drawRectangle}),e.current.events.add("drawingcomplete",o.current,(function t(r){var i,a=r.toJson().geometry,l=r.getBounds(),s=(0,_.Z)(l,4),d=s[0],u=s[1],h=s[2],m=s[3],p={geometry:a,bbox:[Math.min(d,h),Math.min(u,m),Math.max(d,h),Math.max(u,m)]};n((0,c.JU)(p)),n((0,c.Kq)(!1)),o.current&&(null===(i=e.current)||void 0===i||i.events.remove("drawingcomplete",o.current,t))}))),i||h===ye.VO.DrawingMode.idle||null===(u=o.current)||void 0===u||u.setOptions({mode:ye.VO.DrawingMode.idle})}}(e,l);var h=function(){var e=(0,E.Y)(),t=(0,E._)((function(e){return e})),n=t.map.zoom,o=t.detail.display.showSelectedItemAsLayer,r=(0,E._)(s.Wq),i=(0,E._)((function(e){return e.mosaic})),a=i.currentEditingLayerId,l=i.layers,d=Boolean(r.query.searchId),u=(0,A.useCallback)((function(e){return n+.5>=e.layer.minZoom}),[n]),h=!u(r)&&d&&!o,m=(0,A.useCallback)((function(){e((0,c.cq)(r.layer.minZoom))}),[e,r.layer.minZoom]),p=Object.entries(l).filter((function(e){var t=(0,_.Z)(e,2),n=t[0],o=t[1];return n!==a&&!u(o)})).map((function(e){return(0,_.Z)(e,2)[1]})),g={current:h?r:null,others:p};return{showZoomMsg:h||p.length>0,zoomToLayer:m,nonVisibleLayers:g}}(),m=h.zoomToLayer,p=h.showZoomMsg,g=h.nonVisibleLayers,f=(0,Ce.jsx)(Le,{onClick:m,layerVisibility:g}),v=function(e){var t,n,o,r=(0,E.Y)(),i=(0,E._)(s.Wq),a=e.current?null===(t=(0,ve.Z)(null===(n=e.current)||void 0===n?void 0:n.getCamera().bounds))||void 0===t?void 0:t.geometry:null,l=null===(o=i.collection)||void 0===o?void 0:o.extent.spatial.bbox.map((function(e){return(0,ve.Z)(e)}));return{showExtentMsg:!(null===l||void 0===l||!l.length)&&!!a&&!l.some((function(e){return(0,fe.Z)(e,a)})),zoomToExtent:function(){var e=W.toJson(),t=R.data.BoundingBox.fromData(e);r((0,c.GR)({bounds:t}))}}}(e),y=v.showExtentMsg,x=v.zoomToExtent,b=(0,Ce.jsx)(Te,{onClick:x,layerVisibility:g}),j=(0,Ce.jsx)(tt.Y,{"aria-label":"Map tile loading indicator",barHeight:1,styles:mo}),k=r?"":"explorer-sidebar-hidden";return(0,Ce.jsxs)("div",{className:"explorer-map ".concat(k),style:uo,children:[u.areTilesLoading&&j,p&&f,y&&b,(0,Ce.jsx)(no,{mapRef:e}),(0,Ce.jsx)(et,{mapRef:e}),(0,Ce.jsx)(rt,{mapRef:e}),(0,Ce.jsx)(cn,{}),(0,Ce.jsx)(En,{}),(0,Ce.jsx)("div",{id:so,style:ho})]})},uo={width:"100%",height:"100%",position:"relative"},ho={width:"100%",height:"100%"},mo={root:{position:"absolute",width:"100%",zIndex:1},itemProgress:{padding:0}},po=function(){var e=(0,E.Y)(),t=(0,E._)((function(e){return e.map.showSidebar})),n=(0,r.F)(),o=n.semanticColors.bodyBackground,i=(0,A.useCallback)((function(){e((0,c.vp)())}),[e]),a=t?"Left":"Right",l=t?"Hide":"Show";return(0,Ce.jsx)("div",{className:"explorer-map-component",style:{position:"absolute",top:175,left:t?ae.ZR-1:8,zIndex:1,padding:"8px 1px",borderRadius:"0  4px 4px 0",backgroundColor:o,transition:"left .3s",borderRight:"1px solid",borderTop:"1px solid",borderBottom:"1px solid",borderLeft:0,borderTopColor:n.palette.neutralLight,borderBottomColor:n.palette.neutralLight,borderRightColor:n.palette.neutralLight},children:(0,Ce.jsx)(Be.h,{onClick:i,iconProps:{iconName:"Caret".concat(a,"Solid8")},styles:{root:{width:20},rootHovered:{backgroundColor:o},rootFocused:{backgroundColor:o},icon:{fontSize:12,color:n.palette.neutralTertiary},iconHovered:{backgroundColor:o,color:n.semanticColors.bodyText}},title:"".concat(l," sidebar"),"aria-label":"".concat(l," sidebar")})})},go=n(70822),fo=n(27514),vo=n(96688),yo=n(89695),xo=n(89535),bo=n(59530),jo=A.lazy((function(){return Promise.resolve().then(n.bind(n,3974))})),ko=function(e){var t=e.imageResponse,n=e.collectionId,o=e.onRemove,r=(0,E.Y)(),i=(0,A.useState)(),l=(0,_.Z)(i,2),s=l[0],c=l[1],d=(0,A.useCallback)((function(){c(null)}),[]),u=(0,A.useCallback)((function(){c(t)}),[t]),h=(0,bo.B)({onItemClick:function(e,i){switch(null===i||void 0===i?void 0:i.key){case"download":window.open(t.url,"_blank");break;case"delete":r(o({image:t,collectionId:n}));break;case"view":u()}},shouldFocusOnMount:!0,items:Co});return(0,Ce.jsxs)(a.v,{styles:So,children:[(0,Ce.jsx)(Be.h,{menuProps:h,styles:Lo,iconProps:To}),(0,Ce.jsx)(ke.r,{"aria-label":"Click to display full size image",onClick:u,children:(0,Ce.jsx)(ut.E,{styles:Zo,alt:"layer Image",src:t.url,imageFit:st.kQ.contain})}),s&&(0,Ce.jsx)(jo,{ImageResponse:s,collectionId:n,onClose:d})]})},Co=[{key:"view",iconProps:{iconName:"FullScreen"},text:"View larger version",ariaLabel:"View large image"},{key:"download",iconProps:{iconName:"Download"},text:"Download full size",ariaLabel:"Download full size image"},{key:"delete",text:"Remove",iconProps:{iconName:"Delete"},ariaLabel:"Remove image"}],wo=(0,xe.gh)(),So={root:{position:"relative"}},Zo={root:{backgroundColor:"black",width:180,height:180,borderRadius:"4px"},image:{maxWidth:180,maxHeight:180}},Lo={root:{border:"1px solid ".concat(wo.palette.neutralQuaternary),position:"absolute",right:4,top:4,zIndex:1,borderRadius:20,padding:3,color:wo.semanticColors.bodyText,backgroundColor:"rgba(255, 255, 255, 0.8)"},rootFocused:{padding:3},menuIcon:{display:"none"}},To={iconName:"More"},zo=n(13023),Po=function(e){var t=e.collectionId,n=e.images,o=e.isLoading,r=e.onRemove,a=(0,Ce.jsx)(ct.q,{styles:Mo,shimmerColors:_o,shimmerElements:Ao});return(0,Ce.jsxs)(Ce.Fragment,{children:[(0,Ce.jsx)(ze.Z,{}),(0,Ce.jsx)(zo._,{children:"Images:"}),(0,Ce.jsxs)(i.K,{horizontal:!0,wrap:!0,className:"custom-overflow",styles:Do,tokens:Bo,children:[o&&a,n.slice().reverse().map((function(e){return(0,Ce.jsx)(ko,{collectionId:t,imageResponse:e,onRemove:r},e.url)}))]})]})},Io=(0,xe.gh)(),Bo={childrenGap:10},Do={root:{overflowY:"auto",overflowX:"hidden"}},Mo={root:{border:"1px solid ".concat(Io.palette.neutralLighter),borderRadius:4}},_o={shimmer:Io.palette.neutralLighterAlt,shimmerWave:Io.palette.neutralQuaternary},Ao=[{type:dt.s.line,height:180,width:180}],Ro=(n(3974),n(36961)),Eo=n(53718),qo=function(e){var t=e.error;if(!t)return null;var n=t.response,o="Sorry, something went wrong with that request.",r=400===(null===n||void 0===n?void 0:n.status)&&(null===n||void 0===n?void 0:n.data.error)||o;return(0,Ce.jsx)(Ro.c,{styles:No,messageBarType:Eo.f.error,children:r})},No={root:{marginTop:10}},Oo=function(e){var t=e.title,n=e.subTitle,o=e.onClose,r=e.children;return(0,Ce.jsxs)(Ce.Fragment,{children:[(0,Ce.jsxs)(i.K,{horizontal:!0,horizontalAlign:"space-between",children:[(0,Ce.jsx)("h3",{style:Yo,children:t}),(0,Ce.jsx)(Be.h,{title:"Close","aria-label":"Close Image export panel",styles:Ko,iconProps:Wo,onClick:o})]}),r,(0,Ce.jsx)(ze.Z,{styles:{root:{padding:"0 4px"}}}),(0,Ce.jsx)("h4",{style:Yo,children:n})]})},Fo=(0,xe.gh)(),Ko={root:{color:Fo.semanticColors.bodyText},rootHovered:{color:Fo.palette.neutralDark}},Wo={iconName:"Cancel"},Yo={marginBottom:4},Vo=function(e){var t=e.collection,n=e.renderOption,o=e.handleClose;return t?(0,Ce.jsxs)(Oo,{title:"Timelapse Animation",subTitle:"".concat(t.title||t.id,", ").concat(null===n||void 0===n?void 0:n.name),onClose:o,children:[(0,Ce.jsx)(je.x,{children:"Generate an animated image of this dataset over time. "}),(0,Ce.jsx)(je.x,{children:"Keep in mind that many datasets have irregular temporal availability, varied cloud cover, or other changes which might affect the quality of your results. You may need to experiment to get a good result!"})]}):null},Ho=n(48948),Go=function(e){var t=e.showProgressBar,n=e.showBranding,o=e.onSettingsChange,r=(0,Me.k)(!1),a=(0,_.Z)(r,2),l=a[0],s=a[1],c=s.setFalse,d=s.toggle,u=(0,_e.M)("query-dropdown-button");return(0,Ce.jsxs)(i.K,{children:[(0,Ce.jsx)(Be.h,{id:u,className:Qo.button,iconProps:{iconName:"Settings"},title:"Settings",onClick:d}),(0,Ce.jsx)(Ho.r,{target:"#".concat(u),hidden:!l,onDismiss:c,items:[{key:"progress-bar",text:"Include progress bar",canCheck:!0,checked:t,onClick:function(e){null===e||void 0===e||e.preventDefault(),o("showProgressBar",!t)}},{key:"branding",text:"Include branding",canCheck:!0,checked:n,onClick:function(e){null===e||void 0===e||e.preventDefault(),o("showBranding",!n)}}]})]})},Uo=(0,xe.gh)(),Qo=(0,xe.ZC)({button:{color:Uo.semanticColors.bodyText,"&:hover":{color:Uo.semanticColors.bodyText}}}),Jo=n(99517),Xo=n.n(Jo),$o=n(3637),er=n(77426),tr=function(e){var t,n=e.collection,o=e.validations,r=e.value,a=e.onChange,l=(0,_e.M)(),s=(0,Me.k)(!1),c=(0,_.Z)(s,2),d=c[0],u=c[1],h=u.setFalse,m=u.toggle,p=(null===n||void 0===n||null===(t=n.extent)||void 0===t?void 0:t.temporal)||null,g=p&&(0,Ce.jsxs)(i.K,{horizontal:!0,verticalAlign:"center",tokens:cr,children:[(0,Ce.jsx)(zo._,{children:"Start datetime (UTC)"}),(0,Ce.jsx)(Kn.G,{content:(0,Ce.jsx)(er.Z,{extent:p,label:"Valid date range"}),children:(0,Ce.jsx)(Wn.J,{iconName:"Info",styles:ir})})]}),f=r?Xo()(r).toDate():void 0;return(0,Ce.jsxs)(Ce.Fragment,{children:[(0,Ce.jsxs)("div",{style:rr,children:[(0,Ce.jsx)(go.n,{title:"Timelapse starting datetime in UTC (YYYY-MM-DDTHH:mm:ssZ)",name:"start",placeholder:"YYYY-MM-DD",value:r,onChange:function(e,t){return a(e.currentTarget.name,t)},errorMessage:o[0],styles:mr,onRenderLabel:function(){return g}}),(0,Ce.jsx)("button",{id:l,title:"Calendar selector",style:or,onClick:m,children:(0,Ce.jsx)(Wn.J,{iconName:"Calendar"})})]}),(0,Ce.jsx)(De.U,{target:"#".concat(l),hidden:!d,isBeakVisible:!1,directionalHint:Ie.b.topRightEdge,onDismiss:h,children:(0,Ce.jsx)($o.f,{showMonthPickerAsOverlay:!0,showGoToToday:!1,value:f,onSelectDate:function(e){var t=Xo()(r).format("HH:mm:ss"),n=Xo()(e).format("YYYY-MM-DDT".concat(t,"Z"));a("start",n),h()}})})]})},nr=(0,xe.gh)(),or={cursor:"pointer",position:"absolute",top:37,right:4,background:nr.semanticColors.bodyBackground,border:"none"},rr={position:"relative"},ir={root:{cursor:"pointer"}},ar=function(e){if(!e)return Xo()();var t=e.extent.temporal.interval,n=t.reduce((function(e,t){return Xo()(e).isBefore(Xo()(t[0]))?e:t[0]}),t[0][0]);return Xo()(n)},lr=function(e){if(!e)return Xo()();var t=e.extent.temporal.interval,n=t.reduce((function(e,t){return Xo()(e).isAfter(Xo()(t[1]))?e:t[1]}),t[0][1]);return n?Xo()(n):Xo()()},sr=(0,xe.gh)(),cr={childrenGap:6},dr={childrenGap:10},ur=[{key:"mins",text:"Minutes"},{key:"hours",text:"Hours"},{key:"days",text:"Days"},{key:"weeks",text:"Weeks"},{key:"months",text:"Months"},{key:"years",text:"Years"}],hr={root:{height:"100%",overflowY:"auto",overflowX:"clip",padding:10}},mr={root:{width:172}},pr={root:{width:136}},gr={root:{width:90}},fr={root:{marginTop:10}},vr={root:{color:sr.semanticColors.errorText,fontSize:xe.TS.small}},yr=function(){var e=(0,E.Y)(),t=(0,E._)(s.Wq),n=t.collection,o=t.renderOption,r=t.query,l=t.layer,d=(0,E._)((function(e){return e.map})),u=d.zoom,h=d.sidebarPanel,m=d.drawnShape,v=d.isDrawBboxMode,y=(0,E._)((function(e){return b(e,null===n||void 0===n?void 0:n.id)})),x=(0,E._)((function(e){return j(e,null===n||void 0===n?void 0:n.id)})),k=(0,vo.Dm)(null===n||void 0===n?void 0:n.id).data,C=(0,xo.Z)("(max-width: ".concat(O.P_,"px)")),w=(null===m||void 0===m?void 0:m.bbox)||null,S=(0,yo.$m)(null===n||void 0===n?void 0:n.id),Z=(0,vo.ZV)([S],r,r.cql),L={bbox:w,zoom:Math.round(u),render_params:(null===o||void 0===o?void 0:o.options)+"&collection=".concat(null===n||void 0===n?void 0:n.id),cql:Z},T=(0,Je.Z)(x)?function(e,t){var n=ar(e),o=lr(e).diff(n,"d")/2;return{start:n.add(o,"d").utc().startOf("d").toISOString(),step:(null===t||void 0===t?void 0:t.step)||1,unit:(null===t||void 0===t?void 0:t.unit)||"months",frames:(null===t||void 0===t?void 0:t.frameCount)||6,duration:(null===t||void 0===t?void 0:t.duration)||400,showBranding:!0,showProgressBar:!0}}(n,null===k||void 0===k?void 0:k.animationHint):x,z=(0,Pe.Z)((0,Pe.Z)({},L),T),P=(0,pe.V1)(z),I=P.data,B=P.isLoading,D=P.error,M=P.refetch,_=P.remove;(0,A.useEffect)((function(){I&&n&&!y.find((function(e){return e.url===I.url}))&&(e(p({collectionId:n.id,image:I})),_())}),[I,y,n,e,_]);var R=function(e,t){var n=e.currentTarget.name,o=parseInt(t||"0",10);F(n,o)},F=function(t,o){(null===n||void 0===n?void 0:n.id)&&e(f({collectionId:null===n||void 0===n?void 0:n.id,animationSettings:(0,Pe.Z)((0,Pe.Z)({},T),{},(0,N.Z)({},t,o))}))},K=function(e,t,n,o){var r=e.start,i=e.step,a=e.unit,l=e.frames,s=e.duration,c=e.zoom,d={start:[],frames:[],duration:[],step:[],map:[],isValid:!1},u=Xo()(r),h=ar(t),m=lr(t);return r||d.start.push("Required."),u.isValid()||d.start.push("Invalid datetime."),i||d.step.push("Required."),l||d.frames.push("Required."),l>24&&d.frames.push("Max ".concat(24," frames.")),s||d.duration.push("Required."),l<2&&d.frames.push("Must be > 2."),s<10&&d.duration.push("Must be > 10ms."),i<1&&d.step.push("Must be > 1."),u.isBefore(h)&&d.start.push("Must be after ".concat(h.format("YYYY-MM-DD"))),u.add(i*l,a).isAfter(m)&&d.frames.push("Frames go past dataset end date of ".concat(m.format("YYYY-MM-DD"))),c<((null===n||void 0===n?void 0:n.minZoom)||ae.Xe)&&d.map.push("Zoom in to see layer."),o||d.map.push("Please draw an export area on the map."),d.isValid=0===Object.values(d).reduce((function(e,t){return e+(Array.isArray(t)?t.length:0)}),0),d}(z,n,l,w),W=!B&&K.isValid,Y=!v,V=w?"Re-draw export area":"Draw export area",H=(0,Ce.jsxs)(a.v,{children:[(0,Ce.jsx)(je.x,{block:!0,children:"Start by selecting the area you want to capture on the map."}),(0,Ce.jsx)(vn.a,{styles:fr,text:V,iconProps:{iconName:"SingleColumnEdit"},onClick:function(){e((0,c.Kq)(!0)),C&&e((0,c.YB)(!1)),_()},disabled:!Y})]}),G=(0,Ce.jsxs)(i.K,{styles:hr,tokens:dr,children:[(0,Ce.jsx)(Vo,{collection:n,renderOption:o,handleClose:function(){e((0,c.qS)(q.mt.itemSearch)),e((0,c.JU)(null)),e((0,c.Kq)(!1)),_()}}),H,(0,Ce.jsxs)(i.K,{horizontal:!0,horizontalAlign:"start",tokens:cr,verticalAlign:"start",children:[(0,Ce.jsx)(tr,{collection:n,value:T.start,validations:K.start,onChange:F}),(0,Ce.jsx)(go.n,{type:"number",name:"step",label:"Increment",min:1,step:1,defaultValue:T.step.toString(),onChange:R,styles:pr,errorMessage:K.step[0]}),(0,Ce.jsx)(fo.L,{label:"Unit",options:ur,defaultSelectedKey:T.unit,onChange:function(e,t){return F("unit",null===t||void 0===t?void 0:t.key)},styles:gr})]}),(0,Ce.jsxs)(i.K,{horizontal:!0,horizontalAlign:"start",tokens:cr,children:[(0,Ce.jsx)(go.n,{type:"number",label:"No. of frames",name:"frames",min:2,max:48,step:1,defaultValue:T.frames.toString(),onChange:R,styles:mr,errorMessage:K.frames[0]}),(0,Ce.jsx)(go.n,{type:"number",label:"Frame duration (ms)",name:"duration",min:1,step:1,defaultValue:T.duration.toString(),styles:pr,onChange:R,errorMessage:K.duration[0]})]}),(0,Ce.jsxs)(a.v,{shrink:!1,children:[(0,Ce.jsxs)(i.K,{horizontal:!0,horizontalAlign:"start",verticalAlign:"center",tokens:cr,styles:fr,children:[(0,Ce.jsx)(fn.K,{disabled:!W,onClick:function(){M({stale:!0})},children:"Generate animation"}),(0,Ce.jsx)(Go,{showProgressBar:T.showProgressBar,showBranding:T.showBranding,onSettingsChange:F})]}),Boolean(K.map.length)&&(0,Ce.jsxs)(je.x,{block:!0,styles:vr,children:["* ",K.map[0]]}),(0,Ce.jsx)(qo,{error:D})]}),(y.length||B)&&n&&(0,Ce.jsx)(Po,{collectionId:n.id,images:y,isLoading:B,onRemove:g})]});return h===q.mt.animation?G:null},xr=n(43694),br=n(9301),jr=n(69156),kr=n(78225),Cr=n.n(kr),wr=function(e){var t,n=e.item,o=e.size,i=void 0===o?100:o,a=(e.border,(0,r.F)()),l=(0,lt.Z)(!0),c=(0,_.Z)(l,2),d=c[0],u=c[1],h=(0,E._)(s.Wq).renderOption,m=(0,A.useCallback)((function(e){u(e===st.U9.notLoaded)}),[u]),p=(0,X.Wh)(n,h,i),g=Object.values(n.assets).some((function(e){var t;return null===(t=e.roles)||void 0===t?void 0:t.includes("overview")}))?p:null===(t=Cr()[n.collection])||void 0===t?void 0:t.defaultPreviewImage;return g&&h?(0,Ce.jsxs)(Ce.Fragment,{children:[d&&(0,Ce.jsx)(ct.q,{shimmerColors:{background:a.palette.neutralLight,shimmer:a.palette.white,shimmerWave:a.palette.neutralLighter},shimmerElements:[{type:dt.s.line,height:i,width:i}]}),(0,Ce.jsx)(ut.E,{src:g,alt:"Rendered thumbnail for item: ".concat(n.id),imageFit:st.kQ.contain,onLoadingStateChange:m,styles:{root:{background:a.palette.black,display:d?"none":"block",maxWidth:i,maxHeight:i,height:i}},"data-cy":"preview-thumbnail"})]}):null},Sr=n(86481),Zr=n(34337),Lr=function(e){var t=e.iconName,n=e.title,o=e.value,r=e.iconSize,a=void 0===r?20:r,l=(0,xe.y0)({fontSize:a,height:20,width:20});return(0,Ce.jsxs)(i.K,{horizontal:!0,tokens:{childrenGap:8},styles:Tr,children:[(0,Ce.jsxs)("span",{children:[o," "]}),(0,Ce.jsx)(Zr.xu,{title:n,"aria-label":n,iconName:t,className:l})]})},Tr={root:{fontSize:"inherit"}},zr=function(e){var t,n=e.item,o=null===(t=n.properties)||void 0===t?void 0:t["eo:cloud_cover"];return(0,Ce.jsxs)(i.K,{horizontal:!0,horizontalAlign:"space-between",tokens:{childrenGap:5},styles:Ir,children:[(0,Ce.jsx)(Vn,{item:n}),(0,Ce.jsx)(a.v,{styles:Br,children:(0,Sr.Z)(o)&&(0,Ce.jsx)(Lr,{iconName:"Cloud",value:"".concat(o.toFixed(1),"%"),title:"Cloud Cover %"})})]})},Pr=(0,xe.gh)(),Ir={root:{color:Pr.palette.neutralSecondary}},Br={root:{paddingRight:8,fontSize:"inherit"}},Dr=(0,xe.gh)(),Mr=(0,xe.ZC)({root:{float:"right",top:-32,width:40,height:40,borderRadius:20,marginLeft:10,backgroundColor:Dr.semanticColors.bodyBackground,border:"1px solid",borderColor:Dr.palette.themePrimary},icon:{fontSize:xe.TS.size24}}),_r=(0,xe.ZC)((0,Pe.Z)((0,Pe.Z)({},Mr),{},{iconChecked:{color:Dr.semanticColors.bodyBackground},rootChecked:{backgroundColor:Dr.palette.accent,borderColor:Dr.palette.neutralLight},rootCheckedHovered:{backgroundColor:Dr.palette.themeSecondary}})),Ar=function(){var e=(0,_e.M)("tooltip"),t=(0,_e.M)("targetButton"),n=(0,Me.k)(!1),o=(0,_.Z)(n,2),r=o[0],i=o[1].toggle,a="Show a code snippet to access this item's data assets",l=(0,bo.B)({gapSpace:0,target:"#".concat(t)});return(0,Ce.jsxs)(Ce.Fragment,{children:[(0,Ce.jsx)(Kn.G,{content:a,calloutProps:l,children:(0,Ce.jsx)(Be.h,{id:t,onClick:i,iconProps:{iconName:"Code"},ariaLabel:a,"aria-describedby":e,styles:Mr,"data-cy":"item-snippet-button"})}),(0,Ce.jsx)(In,{snippetType:"item",buttonId:t,visible:r,onDismiss:i})]})},Rr=function(){var e=(0,E.Y)(),t=(0,E._)((function(e){return e.detail})),n=t.previewMode,o=t.display.showSelectedItemAsLayer,r=(0,_e.M)("tooltip"),i=(0,_e.M)("targetButton"),a=o?"Remove this item from the map":"View this item on the map",l=(0,bo.B)({gapSpace:0,target:"#".concat(i)}),s=(0,A.useCallback)((function(){e((0,d.Pn)(!o))}),[e,o]);return(0,Ce.jsx)(Kn.G,{content:a,calloutProps:l,children:(0,Ce.jsx)(Be.h,{id:i,onClick:s,checked:o,disabled:n.enabled,iconProps:Er,ariaLabel:a,"aria-describedby":r,styles:_r,"data-cy":"item-map-button"})})},Er={iconName:"Nav2DMapView"},qr=function(e){var t=e.collectionName,n=e.item,o=(0,r.F)();return(0,Ce.jsxs)("div",{style:{padding:15,borderTop:"1px solid",borderBottom:"1px solid",borderTopColor:o.palette.neutralLight,borderBottomColor:o.palette.neutralLight},children:[(0,Ce.jsx)(Rr,{}),(0,Ce.jsx)(Ar,{}),(0,Ce.jsx)(je.x,{block:!0,variant:"medium",styles:{root:{fontWeight:xe.lq.semibold}},children:t}),(0,Ce.jsx)(je.x,{block:!0,variant:"large",styles:{root:{fontWeight:xe.lq.bold,overflowWrap:"anywhere"}},children:n.id}),(0,Ce.jsx)("div",{style:{paddingTop:3},children:(0,Ce.jsx)(zr,{item:n})})]})},Nr=n(22387),Or=function(e){var t=e.label,n=e.value,o=(0,r.F)();return(0,Ce.jsxs)("div",{style:{padding:8,borderTop:"1px solid",borderTopColor:o.palette.neutralLight},children:[(0,Ce.jsx)(je.x,{block:!0,styles:{root:{fontWeight:xe.lq.semibold}},children:t}),(0,Ce.jsx)(je.x,{block:!0,styles:{root:{marginLeft:4,overflowWrap:"anywhere"}},children:n})]})},Fr=function(e){var t,n,o=e.item,r=null===(t=o.links)||void 0===t?void 0:t.find((function(e){return"self"===e.rel})),i=null===(n=o.links)||void 0===n?void 0:n.find((function(e){return"parent"===e.rel})),a=[r?(0,Ce.jsx)(Or,{label:"STAC Item",value:(0,Ce.jsx)(xn.Z,{href:r.href,children:o.id})},"link-self"):null,i?(0,Ce.jsx)(Or,{label:"STAC Collection",value:(0,Ce.jsx)(xn.Z,{href:i.href,children:o.collection})},"link-parent"):null].filter(Boolean);return(0,Ce.jsx)(Ce.Fragment,{children:a})},Kr=function(e){var t=e.item;return(0,Ce.jsxs)(Ce.Fragment,{children:[t.properties&&Object.entries(t.properties).map((function(e){var n=(0,_.Z)(e,2),o=n[0],r=n[1];return(0,Ce.jsx)(Or,{label:Nr.V1.label(o),value:Nr.V1.format(r,o,t)},o)})),(0,Ce.jsx)(Fr,{item:t},"detail-link-list")]})},Wr=function(e){var t=e.item,n=(0,xe.gh)(),o=Object.entries(t.assets).map((function(e){var t,o=(0,_.Z)(e,2),r=o[0],l=o[1],s=null===l||void 0===l||null===(t=l.roles)||void 0===t?void 0:t[0],c=(0,Nr.Q4)(l.type);return(0,Ce.jsx)(Or,{label:l.title,value:(0,Ce.jsxs)(i.K,{tokens:{childrenGap:3},children:[(0,Ce.jsxs)(a.v,{children:[(0,Ce.jsx)(je.x,{styles:{root:{paddingRight:4}},children:c}),s&&(0,Ce.jsx)(je.x,{styles:{root:{backgroundColor:n.palette.neutralLighter,padding:"2px 4px",borderRadius:n.effects.roundedCorner6}},children:(0,Ce.jsx)("code",{children:s})})]}),(0,Ce.jsx)(je.x,{block:!0,style:{fontStyle:"italic"},children:l.description}),(0,Ce.jsxs)(a.v,{children:[(0,Ce.jsx)(je.x,{styles:{root:{paddingRight:4}},children:"STAC Key:"}),(0,Ce.jsx)("code",{children:r})]})]})},r)}));return(0,Ce.jsxs)(jr.M,{headerText:"Assets",children:[(0,Ce.jsxs)(Ro.c,{styles:{root:{margin:"10px 0"}},children:["These file assets are accessible via the",(0,Ce.jsx)(xn.Z,{href:"/docs/quickstarts/reading-stac/",children:"Planetary Computer API"})]}),t.assets&&o]})},Yr=n(82405),Vr=function(){var e=(0,r.F)(),t=(0,E.Y)(),n=(0,E._)((function(e){return e.detail})).previewMode,o=(0,A.useCallback)((function(){t((0,d.fq)()),n.enabled||t((0,c.Bx)())}),[t,n.enabled]);return(0,Ce.jsx)(Yr.K,{onClick:o,iconProps:{iconName:"Back"},ariaLabel:"Return to results list",styles:{icon:{fontSize:xe.TS.size16,color:e.palette.themeDarkAlt},root:{position:"absolute",zIndex:1,height:40,margin:8,backgroundColor:e.semanticColors.bodyBackground,boxShadow:e.effects.elevation4}},"data-cy":"back-to-list",children:"Back to results"})},Hr=n(69627),Gr=function(){var e=(0,E._)((function(e){return e.detail.selectedItem})),t=(0,E._)(s.Wq).collection,n=null===t||void 0===t?void 0:t.title,o=e?(0,Ce.jsxs)("div",{style:Jr,"data-cy":"detail-dialog",children:[(0,Ce.jsx)(Vr,{}),(0,Ce.jsx)("div",{style:Xr,children:(0,Ce.jsx)(wr,{item:e,size:400,border:"top"})}),(0,Ce.jsx)(qr,{collectionName:n,item:e}),(0,Ce.jsxs)(br.o,{styles:{link:{width:"50%"}},children:[(0,Ce.jsx)(jr.M,{headerText:"Metadata",children:(0,Ce.jsx)(Kr,{item:e})}),(0,Ce.jsx)(jr.M,{headerText:"Assets",children:(0,Ce.jsx)(Wr,{item:e})})]})]}):null;return(0,Ce.jsx)(a.v,{className:"custom-overflow",styles:Qr,"data-cy":"detail-dialog-list",children:(0,Ce.jsx)(xr.ErrorBoundary,{FallbackComponent:Hr.ZP,onError:Hr.E7,children:o})})},Ur=(0,xe.gh)(),Qr={root:{height:"100%",overflowY:"auto",overflowX:"clip"}},Jr={border:"1px solid",borderColor:Ur.palette.neutralLight,borderRadius:4,marginRight:3},Xr={minWidth:400,minHeight:400},$r=n(11774),ei=n(58080),ti=n(32730),ni=n(38888),oi=function(e){var t=e.item,n=e.onItemPreview,o=(0,E.Y)(),r=(0,E._)((function(e){return e.detail})).selectedItem,i=(null===r||void 0===r?void 0:r.id)===t.id,a=i?"Cancel":"Nav2DMapView",l=i?"Close preview mode and return to search":"Lock search and preview this item on the map";return(0,Ce.jsxs)("div",{style:ii,children:[(0,Ce.jsx)("div",{style:{position:"absolute"},children:(0,Ce.jsx)(wr,{item:t},t.id)}),(0,Ce.jsx)(ke.r,{title:l,className:"explore-item-preview-button "+(i?"selected":""),onClick:function(){i?o((0,d.YO)()):n()},styles:li,children:(0,Ce.jsx)(Wn.J,{iconName:a,styles:ai})})]})},ri=(0,xe.gh)(),ii={position:"relative",minWidth:100,minHeight:100,borderRight:ri.palette.neutralLighter,borderRightWidth:1,borderRightStyle:"solid",backgroundColor:ri.palette.black,borderRadius:"0"},ai={root:{color:"white",marginTop:4,marginLeft:7}},li={root:{opacity:0,transition:"opacity 0.25s linear",borderColor:"rgba(255, 255, 255, 0.5)",borderWidth:1,borderStyle:"solid",backgroundColor:"rgba(0,0,0,0.4)",position:"absolute",left:"calc(50% - 15px)",top:"calc(50% - 15px)",borderRadius:"50%",height:30,width:30,"&:focus":{opacity:"1 !important"},"&:hover":{opacity:"1 !important"},"&.selected":{opacity:"0.8 "}}},si=function(e){var t,n=e.item,o=e.index,r=e.onItemPreview,a=(0,E.Y)(),l=(0,E._)((function(e){return e.detail})),s=l.selectedItem,u=l.previewMode,h=(0,A.useCallback)((function(){a((0,c.yn)(n.geometry))}),[a,n.geometry]),m=(0,A.useCallback)((function(){a((0,c.DV)())}),[a]),p=(0,A.useCallback)((function(){a((0,d.Vs)(n))}),[a,n]),g=(0,A.useCallback)((function(){r(o)}),[o,r]),f=(null===s||void 0===s?void 0:s.id)===n.id&&u.enabled?vi:fi,v=(null===(t=n.properties)||void 0===t?void 0:t.title)||n.id;return(0,Ce.jsxs)(i.K,{horizontal:!0,styles:f,onMouseEnter:h,onMouseLeave:m,children:[(0,Ce.jsx)(oi,{item:n,onItemPreview:g}),(0,Ce.jsx)(ke.r,{onClick:p,styles:hi,"data-cy":"item-result",children:(0,Ce.jsxs)(i.K,{verticalAlign:"space-evenly",style:yi,children:[(0,Ce.jsx)(je.x,{styles:mi,children:v}),(0,Ce.jsx)("div",{style:pi,children:(0,Ce.jsx)(zr,{item:n})})]})})]})},ci=(0,xe.gh)(),di={background:ci.palette.themeLighterAlt,transition:"background 0.25s linear",boxShadow:ci.effects.elevation8,color:ci.palette.black,textDecoration:"none"},ui={textDecoration:"none",color:ci.palette.black},hi={root:{width:"100%",paddingLeft:10,":focus":ui,":active":ui,":hover":ui,":active:hover":ui}},mi={root:{fontWeight:"600",overflowWrap:"anywhere"}},pi={fontSize:13},gi={borderStyle:"solid",borderRadius:2,overflow:"hidden",color:ci.palette.black,backgroundColor:ci.semanticColors.bodyBackground,marginBottom:6,padding:0,width:"99%",":hover":di,":active:hover":ui,"&:hover .explore-item-preview-button":{opacity:.8}},fi={root:(0,Pe.Z)({borderWidth:1,borderColor:ci.palette.neutralQuaternary},gi)},vi={root:(0,Pe.Z)({borderWidth:2,borderColor:ci.palette.themePrimary,background:"".concat(ci.palette.neutralLighter," !important")},gi)},yi={height:"100%",width:"100%",paddingRight:10},xi=n(89666),bi=function(){var e=(0,E.Y)(),t=(0,E._)(s.Wq).isPinned,n=t?"Stop editing and return to pinned layers":"Pin this layer to the map and perform a new search",o=(0,E._)((function(e){return e.detail})).previewMode.enabled;return(0,Ce.jsx)(Be.h,{title:n,"aria-label":n,iconProps:{iconName:t?"PencilReply":"FluentPinOutline"},onClick:function(){e((0,s.hh)())},disabled:o,"data-cy":"pin-layer-header-button"})},ji=n(63694),ki=n(99625),Ci=n(36998),wi=n.n(Ci),Si=n(12038),Zi=n(36280),Li={"=":"=","<":"<","<=":"\u2264",">":">",">=":"\u2265",between:"between",like:"LIKE",isnull:"IS NULL",in:"in",anyinteracts:"",intersects:""},Ti={">":"after",">=":"on or after","<":"before","<=":"on or before","=":"on",between:"between",like:"like",isnull:"is null",in:"in",anyinteracts:"",intersects:""},zi=function(e){var t=e.title,n=e.icon,o=e.children,r=(0,xe.gh)();return(0,Ce.jsxs)(i.K,{children:[(0,Ce.jsxs)(i.K,{horizontal:!0,tokens:{childrenGap:6},verticalAlign:"center",children:[(0,Ce.jsx)(Wn.J,{iconName:n,styles:{root:{color:r.palette.themePrimary}}}),(0,Ce.jsx)(je.x,{styles:{root:{fontWeight:xe.lq.bold,marginBottom:2}},children:t})]}),(0,Ce.jsx)(i.K,{styles:{root:{marginLeft:20}},children:o})]})},Pi=function(e){var t=e.cql,n=t.map((function(e){var t=new Si.n(e),n=Nr.V1.label(t.property),o=Li[t.operator],r=t.value,i=Array.isArray(t.value)?t.value.join(", "):t.value,a="datetime"===t.property?Ii(t.property,n,r,t.operator):(0,Ce.jsxs)(je.x,{children:[n," ",o," ",Nr.V1.format(i,t.property)]});return(0,Ce.jsx)(je.x,{children:a},"exp-".concat(n,"-").concat(t.operator))})),o=t.map((function(e){return new Si.n(e)})).find((function(e){return"datetime"===e.property}))?null:"All recent data items";return(0,Ce.jsxs)(zi,{title:"Filters Applied",icon:"PageListFilter",children:[o,n]})},Ii=function(e,t,n,o){if(Array.isArray(n)){var r=(0,Zi.LP)(n)?"".concat(t," ").concat(Ti[o]," ").concat((0,Yn.mb)(n[0])," "):"".concat(t," between ").concat((0,Yn.mb)(n[0])," and ").concat((0,Yn.mb)(n[1]));return(0,Ce.jsx)(je.x,{children:r})}if("datetime"===e){var i="".concat(t," ").concat(Ti[o]," ").concat((0,Yn.mb)(n));return(0,Ce.jsx)(je.x,{children:i})}},Bi=function(e){var t=e.onDismiss,n=e.targetElementId,o=(0,E._)(s.Wq),r=o.collection,i=o.renderOption,a=(0,E._)(s.EC),l=r?(0,Ce.jsx)(zi,{title:null===r||void 0===r?void 0:r.title,icon:"World",children:(0,Ce.jsxs)(je.x,{children:[null===r||void 0===r?void 0:r["msft:short_description"]," ",(0,Ce.jsx)(xn.Z,{href:"//".concat(window.location.host,"/dataset/").concat(null===r||void 0===r?void 0:r.id),title:"See full dataset description",children:(0,Ce.jsx)(Wn.J,{iconName:"NavigateExternalInline"})})]})}):null,c=(0,Ce.jsx)(Pi,{cql:a}),d=null!==i&&void 0!==i&&i.description?(0,Ce.jsx)("span",{dangerouslySetInnerHTML:{__html:ki.TU.parseInline(wi().sanitize(i.description))}}):null===i||void 0===i?void 0:i.name,u=(0,Ce.jsx)(zi,{title:"Rendering",icon:"MapLayers",children:d});return(0,Ce.jsx)(Ce.Fragment,{children:(0,Ce.jsx)(De.U,{className:Di.callout,role:"alertdialog",gapSpace:0,target:"#".concat(n),onDismiss:t,directionalHint:Ie.b.rightCenter,setInitialFocus:!0,children:(0,Ce.jsxs)(xr.ErrorBoundary,{FallbackComponent:Hr.ZP,onError:Hr.E7,children:[l,(0,Ce.jsx)(ze.Z,{}),c,(0,Ce.jsx)(ze.Z,{}),u]})})})},Di=(0,xe.ZC)({callout:{width:420,padding:"20px 24px"}}),Mi=function(){var e=(0,E.Y)(),t=(0,E._)(s.Wq),n=t.collection,o=t.renderOption,r=(0,Me.k)(!1),i=(0,_.Z)(r,2),a=i[0],l=i[1].toggle,d=function(){var e=(0,E.Y)(),t=(0,E._)(s.Wq).query,n=function(n){return function(o){var r=(0,Pe.Z)((0,Pe.Z)({},t),{},{sortby:n});e((0,s.oT)(r)),null===o||void 0===o||o.preventDefault()}};return{key:"sortby",text:"Sort order",iconProps:{iconName:"Sort"},disabled:(0,E._)((function(e){return e.detail})).previewMode.enabled,"data-cy":"sortby",subMenuProps:{items:[{key:"sortby-date-desc",text:"Date descending",title:"Show newest results first","data-cy":"sortby-desc",iconProps:{iconName:"SortDown"},canCheck:!0,checked:!t.sortby||"desc"===t.sortby,onClick:n("desc")},{key:"sortby-date-asc",text:"Date ascending",title:"Show oldest results first",iconProps:{iconName:"SortUp"},canCheck:!0,checked:"asc"===t.sortby,onClick:n("asc")}]}}}(),u=(0,_e.M)("explore-results-menu-button"),h=function(e,t){if(!e||!t)return!1;var n=!e.extent.temporal.interval.map((function(e){var t=(0,_.Z)(e,2),n=t[0],o=t[1];return Xo()(n).isSame(Xo()(o))})).every(Boolean),o=t.type===q.F5.tile;return n&&o}(n,o),m="This layer isn't available for image export.",p={items:[d,{key:"separator1",itemType:ji.n.Divider},{key:"details",text:"Filter details",ariaLabel:"Details of current filter settings",iconProps:{iconName:"Info"},onClick:l,"data-cy":"query-detail-button"},{key:"collection",text:"Data Catalog page (".concat(null===n||void 0===n?void 0:n.id,")"),iconProps:{iconName:"ProductCatalog"},onClick:function(){window.open("//".concat(window.location.host,"/dataset/").concat(null===n||void 0===n?void 0:n.id),"_blank")}},{key:"exports",text:"Export",itemType:ji.n.Divider},{key:"animate",text:"Generate timelapse animation",ariaLabel:"Generate timelapse animation base on current filter settings",title:h?void 0:m,iconProps:{iconName:"PlaybackRate1x"},onClick:function(){e((0,c.qS)(q.mt.animation))},disabled:!h},{key:"image",text:"Generate snapshot image",ariaLabel:"Generate timelapse animation base on current filter settings",title:h?void 0:m,iconProps:{iconName:"Photo2"},onClick:function(){e((0,c.qS)(q.mt.image))},disabled:!h}]};return(0,Ce.jsxs)(Ce.Fragment,{children:[a&&(0,Ce.jsx)(Bi,{onDismiss:l,targetElementId:u}),(0,Ce.jsx)(Be.h,{id:u,title:"More options",styles:Ai,iconProps:_i,menuProps:p,"data-cy":"explore-results-menu-button"})]})},_i={iconName:"More"},Ai={menuIcon:{display:"none"}},Ri=function(e){var t=e.results,n=e.isLoading,o=(0,E._)(s.Wq).collection;if(void 0===t)return null;var r=t.features.length,a=1===r?"item":"items",l=t.links.find((function(e){return"next"===e.rel}))?"the first":"",c={root:(0,Pe.Z)({fontSize:"12px"},Wi(n))},d=(0,Ce.jsxs)(je.x,{styles:c,children:["Showing ",l," ",r," ",a," that matched your filter."]}),u=(0,Ce.jsx)(je.x,{styles:c,children:"Sorry, no items matched your filter. Try adjusting the query parameters or expand the map area."}),h=0!==r?d:u;return(0,Ce.jsxs)(i.K,{horizontal:!0,horizontalAlign:"space-between",tokens:Ei,styles:qi,children:[(0,Ce.jsxs)(i.K,{tokens:Ei,children:[(0,Ce.jsx)(je.x,{styles:Ni,children:null===o||void 0===o?void 0:o.title}),(0,Ce.jsxs)(i.K,{horizontal:!0,tokens:Ei,horizontalAlign:"space-between",verticalAlign:"center",children:[h,n&&(0,Ce.jsx)($r.$,{size:xi.E.xSmall})]})]}),(0,Ce.jsxs)(i.K,{horizontal:!0,verticalAlign:"start",children:[(0,Ce.jsx)(bi,{}),(0,Ce.jsx)(Mi,{})]})]})},Ei={childrenGap:5},qi={root:{padding:"14px 5px 14px 5px"}},Ni={root:{fontSize:xe.TS.medium,fontWeight:xe.lq.bold}},Oi=n(45568),Fi=function(e){var t=e.request,n=t.data,o=t.isError,r=t.isFetching,a=t.isPreviousData,l=e.visible,u=(0,E.Y)(),h=(0,E._)(s.Wq).collection,m=(0,E._)((function(e){return e.detail})).previewMode,p=(0,A.useState)(0),g=(0,_.Z)(p,2),f=g[0],v=g[1],y=(0,A.useRef)(null),x=(0,A.useRef)(),b=(0,xo.Z)("(max-width: ".concat(O.P_,"px)")),j=x.current!==h;(0,A.useEffect)((function(){var e;a||(v(0),null===(e=y.current)||void 0===e||e.scrollToIndex(0),x.current=h)}),[h,a]);var k=(0,A.useCallback)((function(e){var t=e.target;v(t.scrollTop)}),[]),C=(0,A.useCallback)((function(e){if(n){var t=n.features[e];t&&(b&&u((0,c.YB)(!1)),m.enabled?u((0,d.iM)(t)):u((0,d.SO)({items:n.features,currentIndex:e})))}}),[n,u,b,m.enabled]);if(o)return(0,Ce.jsxs)(Ce.Fragment,{children:[(0,Ce.jsx)(ze.Z,{}),(0,Ce.jsxs)(Ro.c,{messageBarType:Eo.f.error,styles:Yi,children:["Sorry, we're having trouble completing this search. If the issue persists, please consider submitting an issue on our"," ",(0,Ce.jsx)(xn.Z,{style:{padding:0},href:"https://github.com/microsoft/PlanetaryComputer",children:"GitHub repo"}),"."]})]});var w=(0,Ce.jsxs)(Ce.Fragment,{children:[(0,Ce.jsx)(ze.Z,{}),(0,Ce.jsx)($r.$,{})]});if(h&&j&&a)return w;if(!n&&r)return w;if(!n||!h)return(0,Ce.jsx)(i.K.Item,{align:"center",styles:Hi,children:(0,Ce.jsx)(Rn,{})});return(0,Ce.jsxs)(Ce.Fragment,{children:[(0,Ce.jsx)(i.K,{id:"explorer-search-results",styles:Vi,children:(0,Ce.jsxs)(xr.ErrorBoundary,{FallbackComponent:Hr.ZP,onError:Hr.E7,children:[(0,Ce.jsx)(Ri,{results:n,isLoading:r}),(0,Ce.jsx)("div",{className:f?"hood on":"hood"}),(0,Ce.jsx)("div",{className:"custom-overflow",style:(0,Pe.Z)({height:"100%",overflowY:"auto",overflowX:"hidden"},Wi(r)),onScroll:k,"data-cy":"search-results-list",children:(0,Ce.jsx)(ei.k,{direction:ti.U.vertical,children:(0,Ce.jsx)(ni.a,{componentRef:y,items:null===n||void 0===n?void 0:n.features,onRenderCell:function(e,t){return!e||(0,Oi.Z)(t)?null:(0,Ce.jsx)(si,{item:e,index:t,onItemPreview:C})}})})})]})}),l&&(0,Ce.jsx)(Mn,{}),l&&(0,Ce.jsx)(Rn,{})]})},Ki=(0,xe.gh)(),Wi=function(e){return{opacity:e?.4:1,transition:"opacity 0.1s ease-in-out"}},Yi={root:{borderRadius:4,margin:8,width:"unset"}},Vi={root:{background:Ki.palette.neutralLighterAlt,display:"flex",height:"100%",paddingLeft:10,paddingRight:10,paddingBottom:1,borderTop:"1px solid ".concat(Ki.palette.neutralLight),overflowY:"auto",overflowX:"hidden"}},Hi={root:{width:"100%",marginTop:"auto !important"}},Gi=n(44888),Ui=n.n(Gi),Qi=function(){var e=(0,Ge.Z)((0,He.Z)().mark((function e(t){var n,o,r;return(0,He.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,_.Z)(t.queryKey,2),o=n[1],e.next=3,Ui().dereference("".concat(O.ST,"/collections/").concat(o,"/queryables"));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ji=n(89786),Xi=n(14563),$i={start:!0,startError:null,end:!0,endError:null},ea=function(e,t){return(0,Pe.Z)((0,Pe.Z)({},e),t)},ta=((0,Yn.hT)(new Date),function(e,t){return(0,Pe.Z)((0,Pe.Z)({},e),t)}),na=(0,Yn.hT)(new Date),oa=A.createContext({validMinDate:na,validMaxDate:na,workingDates:{start:na,end:null},setValidation:function(){},validationState:$i}),ra=function(e){var t=e.state,n=e.children;return(0,Ce.jsx)(oa.Provider,{value:t,children:n})},ia=function(e){var t=e.onChange,n=e.navigatedDate,o=(0,A.useState)(n.getFullYear()),r=(0,_.Z)(o,2),a=r[0],l=r[1],s=(0,A.useState)(n.getMonth()),c=(0,_.Z)(s,2),d=c[0],u=c[1],h=(0,A.useContext)(oa),m=h.validMaxDate,p=h.validMinDate,g=function(e){return function(){var n=(0,X.Bv)(new Date(a,d,1)),o="next"===e?n.add(1,"month"):n.subtract(1,"month"),r=o.month(),i=o.year();u(r),l(i),t(new Date(i,r))}},f=function(e){return function(n,o){var r,i;o&&("year"===e?(i=o.key,l(i),t(new Date(i,d))):(r=o.key,u(r),t(new Date(a,r))))}};return(0,Ce.jsxs)(i.K,{horizontal:!0,horizontalAlign:"space-between",children:[(0,Ce.jsxs)(i.K,{horizontal:!0,styles:ua,tokens:da,children:[(0,Ce.jsx)(fo.L,{"aria-label":"Select month",styles:ca,options:aa(function(e){return function(t){var n=(0,X.Bv)(new Date(e,t,1));return p.isAfter(n,"month")||m.isBefore(n,"month")}}(a)),onChange:f("month"),selectedKey:d}),(0,Ce.jsx)(fo.L,{"aria-label":"Select year",styles:ca,options:la(p,m),onChange:f("year"),selectedKey:a})]}),(0,Ce.jsxs)(i.K,{horizontal:!0,verticalAlign:"center",children:[(0,Ce.jsx)(Be.h,{"aria-label":"Previous month",styles:sa,iconProps:{iconName:"ChevronLeft"},onClick:g("previous")}),(0,Ce.jsx)(Be.h,{"aria-label":"Next month",styles:sa,iconProps:{iconName:"ChevronRight"},onClick:g("next")})]})]})},aa=function(e){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((function(t,n){return{key:n,text:t,disabled:e(n)}}))},la=function(e,t){for(var n=e.year(),o=t.year(),r=[],i=n;i<=o;i++)r.push({key:i,text:i.toString()});return r},sa={root:{width:20,height:20},icon:{fontSize:12}},ca={root:{width:70}},da={childrenGap:5},ua={root:{marginLeft:8}},ha=n(90762),ma=function(e){var t=e.time,n=e.rangeType,o=e.onChange,r=(0,A.useState)(""),a=(0,_.Z)(r,2),l=a[0],s=a[1],c="start"===n?"00:00:00Z":"23:59:59Z";return(0,Ce.jsxs)(i.K,{styles:ga,tokens:pa,horizontal:!0,verticalAlign:"center",children:[(0,Ce.jsx)(je.x,{styles:fa,children:"Time (UTC)"}),(0,Ce.jsx)(ha.K,{maskFormat:{"*":/[0-9]/},maskChar:"_",mask:"**:**:**",styles:va,value:t,onChange:function(e,t){t&&!t.includes("_")&&(ya(t)?(s(""),o(t||c)):s("* 00:00:00 \u2013 23:59:59"))},errorMessage:l})]})},pa={childrenGap:4},ga={root:{margin:4,marginLeft:8,marginTop:0}},fa={root:{fontWeight:600}},va={root:{width:125}},ya=function(e){try{var t=e.split(":"),n=(0,_.Z)(t,3),o=n[0],r=n[1],i=n[2],a=parseInt(o),l=parseInt(r),s=parseInt(i);return!(a>23||l>59||s>59)}catch(c){return!1}},xa=function(e){var t=e.label,n=e.rangeType,o=e.operator,r=e.onSelectDate,a=(0,A.useRef)(null),l=(0,A.useState)(""),s=(0,_.Z)(l,2),c=s[0],d=s[1],u=(0,A.useState)(),h=(0,_.Z)(u,2),m=h[0],p=h[1],g=(0,A.useContext)(oa),f=g.validMaxDate,v=g.validMinDate,y=g.workingDates,x=g.validationState,b=g.setValidation,j=y[n],k=(0,A.useCallback)((function(e){var t=(0,Yn.hT)(e);if(!t.isValid())return"Invalid date, use MM/DD/YYYY";if(t.isBefore(v))return"Date must be after ".concat((0,Yn.mn)(v.subtract(1,"day")));if(t.isAfter(f))return"Date must be before ".concat((0,Yn.mn)(f.add(1,"day")));if("between"===o){if("start"===n&&null!==y&&void 0!==y&&y.end&&t.isAfter(y.end))return"Date must be before End Date";if("end"===n&&null!==y&&void 0!==y&&y.start&&t.isBefore(y.start))return"Date must be after Start Date"}return""}),[o,n,f,v,y.end,y.start]),C=(0,A.useCallback)((function(e){if(!e)return!1;var t=k(e);d(t);var o=(0,N.Z)({},n,!Boolean(t));return o[n]!==x[n]&&b(o),p(t?e:void 0),!Boolean(t)}),[k,n,b,x]),w=(0,A.useCallback)((function(e){C(e),r((0,N.Z)({},n,(0,Yn.hT)(e)))}),[r,n,C]),S=(0,A.useCallback)((function(e){if(j){var t=(0,Yn.BF)(e,null===j||void 0===j?void 0:j.format("HH:mm:ss"));w(t.toDate())}}),[j,w]),Z=(0,A.useCallback)((function(e){if(j){var t=(0,Yn.BF)(j,e);w(t.toDate())}}),[j,w]);(0,A.useEffect)((function(){c&&"between"===o&&m&&(C(m)&&S(m))}));var L=(0,A.useState)((0,X.TU)((0,X.Bv)(j))),T=(0,_.Z)(L,2),z=T[0],P=T[1];if(!j)return null;var I={navigatedDate:z},B=(0,Ce.jsx)(ia,{onChange:function(e){return P(e)},navigatedDate:z}),D=["between","before","after"].includes(o);return(0,Ce.jsxs)(i.K,{styles:ja,children:[(0,Ce.jsx)(zo._,{styles:Ca,children:t}),B,(0,Ce.jsx)($o.f,{ref:a,styles:ka,showMonthPickerAsOverlay:!0,highlightSelectedMonth:!0,isMonthPickerVisible:!1,showGoToToday:!1,value:(0,X.TU)(j),minDate:(0,X.TU)(v),maxDate:(0,X.TU)(f),onSelectDate:S,calendarDayProps:(0,Pe.Z)((0,Pe.Z)({},La),I),calendarMonthProps:Ta}),D&&(0,Ce.jsxs)(Ce.Fragment,{children:[(0,Ce.jsx)(ze.Z,{styles:za}),(0,Ce.jsx)(ma,{time:j.utc().format("HH:mm:ss"),rangeType:n,onChange:Z})]}),c&&(0,Ce.jsx)(Ro.c,{styles:wa,messageBarType:Eo.f.error,children:c})]})},ba=(0,xe.gh)(),ja={root:{maxWidth:220,marginRight:3}},ka={root:{minHeight:231,"& .ms-FocusZone":{paddingBottom:0}}},Ca={root:{textTransform:"uppercase",marginTop:8,marginLeft:8,fontSize:13}},wa={root:{margin:2,borderRadius:2}},Sa={dayCell:{fontSize:xe.TS.size14,width:29,height:29,lineHeight:29},dayButton:{fontSize:xe.TS.size14},daySelected:{backgroundColor:ba.palette.themePrimary,color:ba.palette.white+" !important",fontWeight:xe.lq.semibold,borderRadius:"100% !important",":after":{border:0}},datesAbove:{":after":{border:0}},datesBelow:{":after":{border:0}},datesLeft:{":after":{border:0}},datesRight:{":after":{border:0}},dayIsToday:{borderRadius:0,backgroundColor:"unset",color:ba.palette.black,fontWeight:xe.lq.regular},weekDayLabelCell:{fontSize:xe.TS.size14,fontWeight:xe.lq.semibold},disabledStyle:{color:ba.palette.neutralTertiary},header:{display:"none"},headerIconButton:{color:ba.palette.themePrimary,":hover":{color:ba.palette.themePrimary}},table:{paddingBottom:0}},Za={navigationButton:{color:ba.palette.themePrimary,":hover":{color:ba.palette.themePrimary}}},La={styles:Sa,navigationIcons:{leftNavigation:"ChevronLeft",rightNavigation:"ChevronRight"}},Ta={styles:Za,navigationIcons:{leftNavigation:"ChevronLeft",rightNavigation:"ChevronRight"},animationDirection:Xi.s.Horizontal},za={root:{marginBottom:4,height:0}},Pa=(xe.TS.size12,xe.lq.semilight,xe.TS.size12,function(e){var t=e.isRange?e.value[0]:e.value;return(0,Yn.hT)(t)}),Ia=function(e){var t=e.isRange?e.value[1]:new Date;return(0,Yn.hT)(t)},Ba=n(15825),Da=function(e,t){var n=(0,A.useState)(),o=(0,_.Z)(n,2),r=o[0],i=o[1];(0,A.useEffect)((function(){i(e)}),[]);var a=(0,A.useState)(_a(e)),l=(0,_.Z)(a,2),s=l[0],c=l[1],d={items:Ma,onItemClick:function(e,t){t&&c(t)}};return{OperatorSelector:(0,Ce.jsx)(Ba.M,{text:s.text,menuProps:d,styles:Ra}),operatorSelection:s,resetOperatorSelection:function(){r&&c(_a(r))}}},Ma=[{key:"between",text:"Between dates"},{key:"on",text:"On date"},{key:"before",text:"On or before date"},{key:"after",text:"On or after date"}],_a=function(e){var t=Ma.find((function(t){return e.isRange?"between"===t.key:"anyinteracts"===e.operator||"="===e.operator?"on"===t.key:"<="===e.operator?"before"===t.key:">="===e.operator&&"after"===t.key}));if(!t)throw new Error('Unable to find operator "'.concat(e.operator,'" for date control'));return t},Aa=(0,xe.gh)(),Ra={root:{padding:0},label:{margin:0,color:Aa.palette.themePrimary,fontWeight:xe.lq.semibold},menuIcon:{color:Aa.palette.themePrimary}},Ea=n(60718),qa=n(76071),Na=function(e){var t=e.dateExpression,n=e.disabled,o=void 0!==n&&n,r=(0,E.Y)(),a=(0,A.useRef)(null),l=(0,A.useMemo)((function(){return function(e){return{start:Pa(e),end:e.isRange?Ia(e):(0,Yn.hT)(e.max)}}(t)}),[t]),c=(0,A.useReducer)(ta,l),d=(0,_.Z)(c,2),u=d[0],h=d[1],m=(0,A.useReducer)(ea,$i),p=(0,_.Z)(m,2),g=p[0],f=p[1],v=(0,Yn.$Y)(t.min),y=(0,Yn.h3)(t.max),x=Da(t,l),b=x.OperatorSelector,j=x.operatorSelection,k=function(e,t,n,o,r){var i=e.start&&e.end,a=!t.start.isSame(n.start,"day"),l=!t.end&&!n.end||Boolean(t.end&&!t.end.isSame(n.end,"day"));return i&&(a||l||o!==r)}(g,l,u,t.operator,j.key),C=(0,A.useCallback)((function(){if(k){var e=function(e,t){var n={property:"datetime"},o=(0,Yn.DZ)(e.start),r=(0,Yn.DZ)((0,Yn.$Y)(e.start)),i=(0,Yn.DZ)((0,Yn.h3)(e.start)),a=e.end?(0,Yn.DZ)(e.end):void 0;switch(t){case"between":if(void 0===a)throw new Error("Invalid date range: missing 'end'");return{op:"anyinteracts",args:[n,{interval:[o,a]}]};case"on":return{op:"anyinteracts",args:[n,{interval:[r,i]}]};case"after":return{op:">=",args:[n,{timestamp:o}]};case"before":return{op:"<=",args:[n,{timestamp:o}]};default:throw new Error("Invalid operator: ".concat(t," for date range field"))}}(u,j.key);r((0,s.Bd)(e))}}),[k,u,j.key,r]),w=Ti[t.operator],S=function(e){return e.isRange?e.value.map((function(e){return(0,Yn.mb)(e,!0,!0)})).join(" \u2013 "):(0,Yn.mb)(e.value,!0,!0)}(t),Z="between"===j.key,L={validMinDate:v,validMaxDate:y,workingDates:u,setValidation:f,validationState:g};(0,A.useEffect)((function(){C()}),[C,u,j.key]);var T=function(e){var t=(0,Yn.hT)(e.min),n=(0,Yn.hT)(e.max);return t.isSame(n,"day")}(t),z=T||o,P=T?(0,Ce.jsxs)(je.x,{children:[(0,Ce.jsx)(je.x,{style:{fontWeight:500},children:(0,Yn.mn)(l.start)})," ","is the only date available for this dataset"]}):"";return(0,Ce.jsx)(Ce.Fragment,{children:(0,Ce.jsx)(Kn.G,{content:P,children:(0,Ce.jsx)(Ea.P,{ref:a,label:"Date acquired",directionalHint:Ie.b.rightTopEdge,onRenderText:function(){var e="".concat((0,X.kC)(w)," ").concat(S);return(0,Ce.jsx)(qa.Z,{label:"Acquired",displayValue:e,title:e},"datefield-button-label")},disabled:z,children:(0,Ce.jsxs)(ra,{state:L,children:[(0,Ce.jsx)(i.K,{horizontal:!0,styles:Ka,horizontalAlign:"space-between",children:b}),(0,Ce.jsx)(ze.Z,{styles:Wa}),(0,Ce.jsxs)(i.K,{horizontal:!0,tokens:Fa,children:[(0,Ce.jsx)(xa,{label:Z?"Start date":"",rangeType:"start",operator:j.key,onSelectDate:h}),Z&&(0,Ce.jsxs)(Ce.Fragment,{children:[(0,Ce.jsx)(Ji.p,{styles:Ya}),(0,Ce.jsx)(xa,{label:"End date",rangeType:"end",operator:j.key,onSelectDate:h})]})]})]})},"query-datetime-field")})})},Oa=(0,xe.gh)(),Fa={childrenGap:0},Ka={root:{paddingLeft:Oa.spacing.s1,paddingRight:Oa.spacing.s1}},Wa={root:{padding:0},content:{display:"block"}},Ya={wrapper:{height:"auto"},divider:{height:"100%",backgroundColor:Oa.palette.neutralLight}},Va={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://example.org/queryables",type:"object",title:"",properties:{datetime:{description:"Datetime",type:"string",title:"Acquired",format:"date-time",pattern:"(\\+00:00|Z)$"}}},Ha=n(10086),Ga=["geometry","proj:","epsg:","label:","classification:","start_datetime","end_datetime","created","updated"],Ua=["array"],Qa=function(e){var t=e.queryables,n=e.cql,o=(0,E.Y)(),r=function(e){return(null===e||void 0===e?void 0:e.expressions.map((function(e){return e.property})))||[]}(n),i=function(e){if(e){var t=Object.assign(Object.create(Object.getPrototypeOf(e)),e);return Object.keys(t.properties).forEach((function(e){var n=Ga.some((function(t){return e.startsWith(t)})),o=Ua.includes(t.properties[e].type);(n||o)&&delete t.properties[e]})),t}}(t),a=function(e,t){var n=Object.keys((null===e||void 0===e?void 0:e.properties)||{}).sort(),o=null===e||void 0===e?void 0:e.properties;return n.map((function(e){var n=null===o||void 0===o?void 0:o[e],r=t.includes(e),i="datetime"===e;return{key:e,text:(0,yo.X1)(n,e),title:i?"This filter cannot be removed":n.description,data:n,checked:r,disabled:i}}))}(i,r),l="Select filters";return(0,Ce.jsx)(fo.L,{multiSelect:!0,selectedKeys:r,ariaLabel:l,placeholder:l,options:a,onRenderTitle:(0,Ha.gq)("Options",l,Xa,$a),styles:el,onChange:function(e,t){var n=null===t||void 0===t?void 0:t.key,r=null===t||void 0===t?void 0:t.data;if(null!==t&&void 0!==t&&t.selected){var i=(0,Zi.DJ)(n,r);o((0,s.Bd)(i))}else o((0,s.TK)(n))}})},Ja=(0,xe.gh)(),Xa={root:{color:Ja.palette.themePrimary,fontSize:xe.TS.small}},$a={root:{marginRight:4,width:12,height:12}},el={title:{color:Ja.palette.themePrimary,fontSize:xe.TS.small,span:{position:"relative",top:1,color:Ja.palette.themePrimary,fontSize:xe.TS.small},i:{width:14,height:14,marginRight:6,top:4},border:0,padding:0,"&:hover":{color:Ja.palette.themePrimary+" !important"},"&:focus":{color:Ja.palette.themePrimary+" !important"},"&:focus-visible":{color:Ja.palette.themePrimary+" !important"},"&:focus-within":{color:Ja.palette.themePrimary+" !important"},lineHeight:"unset",display:"inline"},dropdownItemSelected:{backgroundColor:Ja.palette.white},caretDownWrapper:{display:"none"},dropdown:{"&:focus:after":{border:"0px "},"&:focus-visible":{outline:"1px solid",outlineColor:Ja.palette.neutralSecondary,borderRadius:2}},callout:{minWidth:200,marginTop:5}},tl=function(){var e,t=(0,E._)(s.Wq),n=t.collection,o=t.query.cql,r=(0,E._)((function(e){return e.detail})).previewMode.enabled,a=(e=null===n||void 0===n?void 0:n.id,(0,ht.useQuery)(["queryable",e],Qi,{refetchOnWindowFocus:!1,refetchOnMount:!1,retry:!1,enabled:Boolean(e)})),l=a.data,c=a.isError,d=a.isLoading,u=c?Va:l,h=(0,A.useMemo)((function(){return n&&u?new Si.R(o,n,u):null}),[n,u,o]),m=null!==h&&void 0!==h&&h.dateValue?(0,Ce.jsx)(Na,{dateExpression:h.dateValue,disabled:r}):null,p=null===h||void 0===h?void 0:h.getExpressions({omit:["datetime"]}),g=null===p||void 0===p?void 0:p.map((function(e){return e.getControl(r)}));return(0,Ce.jsxs)(i.K,{tokens:rl,children:[(0,Ce.jsx)(ze.Z,{styles:sl}),(0,Ce.jsxs)(i.K,{horizontal:!0,tokens:al,styles:il,children:[(0,Ce.jsx)(je.x,{styles:ll,children:"Custom filters"}),(0,Ce.jsx)(Qa,{queryables:u,cql:h})]}),d&&ol,m,g,(0,Ce.jsx)(ze.Z,{styles:sl})]})},nl=(0,xe.gh)(),ol=(0,Ce.jsx)(ct.q,{shimmerElements:[{type:dt.s.line,height:34}],shimmerColors:{background:nl.palette.neutralLighter,shimmer:nl.palette.neutralLight,shimmerWave:nl.palette.neutralLighterAlt}}),rl={childrenGap:4},il={root:{alignItems:"flexStart",justifyContent:"space-between",marginBottom:"4px"}},al={childrenGap:4},ll={root:{fontWeight:xe.lq.bold,fontSize:xe.TS.size14}},sl={root:{padding:0,margin:0,height:13}},cl=n(46382),dl=n(37343),ul=n(3205),hl=n(46133),ml=n(93464),pl=n(83028),gl=n(28050),fl=n(7293),vl=n(55854),yl=function(e){var t=e.groupId,n=e.category,o=e.onButtonClick,r=e.onCloseClick,l=e.onBackClick,s=(0,fl.d)(),c=s.groupConfig,d=s.collectionConfig,u=(0,pe.bX)().data,h=c[t];if(!h)return(0,Ce.jsx)(Ro.c,{children:(0,Ce.jsx)(je.x,{children:"Sorry, this group could not be found."})});var m=(null===u||void 0===u?void 0:u.collections.filter((function(e){var o=e["msft:group_id"]===t,r=!n||d[e.id].category===n,i=(0,le.j)(e);return o&&r&&i})))||[];return(0,Ce.jsxs)(Ce.Fragment,{children:[(0,Ce.jsxs)(i.K,{horizontal:!0,className:wl.header,horizontalAlign:"space-between",verticalAlign:"center",children:[(0,Ce.jsxs)(a.v,{children:[(0,Ce.jsx)(Be.h,{styles:Zl,iconProps:xl,ariaLabel:"Return to dataset list",title:"Return to dataset list",onClick:l}),(0,Ce.jsx)("span",{className:"".concat(wl.title," ").concat(wl.titlePadded),children:h.title})]}),(0,Ce.jsx)(Be.h,{styles:Zl,iconProps:Sl,ariaLabel:"Close collection selector dialog",onClick:r})]}),(0,Ce.jsxs)(i.K,{styles:jl,children:[(0,Ce.jsx)(je.x,{styles:bl,children:h.short_description}),m.map((function(e){return(0,Ce.jsx)(vl.Z,{asButton:!0,onButtonClick:o,collection:e},e.id)}))]})]})},xl={iconName:"Back"},bl={root:{padding:"10px 0px",maxWidth:600}},jl={root:{padding:"10px 32px"}},kl=function(){var e=(0,E.Y)(),t=(0,E._)(s.Wq).collection,n=(0,E._)((function(e){return e.detail})).previewMode,o=(0,pe.bX)().data,r=(0,A.useState)(""),a=(0,_.Z)(r,2),l=a[0],c=a[1],d=(0,A.useState)(),u=(0,_.Z)(d,2),h=u[0],m=u[1],p=(0,Me.k)(!1),g=(0,_.Z)(p,2),f=g[0],v=g[1],y=v.setTrue,x=v.setFalse;(0,pl.rB)();var b=(0,_e.M)("exp-selector-title"),j=function(t){if(o)if(t.startsWith(gl.gt))m(t.substring(gl.gt.length));else{var n=o.collections.find((function(e){return e.id===t}));n&&e((0,s.dp)(n)),x()}},k=(0,Ce.jsx)("div",{style:Ll,className:"catalog-selector-toc",children:(0,Ce.jsx)("div",{style:Tl,children:(0,Ce.jsx)(dl.J,{setHashOnClick:!1,preFilterCollectionFn:le.j,includeStorageDatasets:!1})})}),C=h&&(0,Ce.jsx)(yl,{groupId:h,onButtonClick:j,onCloseClick:x,onBackClick:function(){m(null)}}),w=(0,Ce.jsxs)(Ce.Fragment,{children:[(0,Ce.jsxs)("div",{className:wl.header,children:[(0,Ce.jsx)("span",{className:wl.title,id:b,children:"Select a dataset"}),(0,Ce.jsx)(hl.G,{filterText:l,onFilterChange:function(e,t){c(t||"")}}),(0,Ce.jsx)(Be.h,{styles:Zl,iconProps:Sl,ariaLabel:"Close popup modal",onClick:x})]}),(0,Ce.jsxs)(i.K,{horizontal:!0,styles:Pl,children:[!l&&k,!l&&(0,Ce.jsx)("div",{style:Il,children:(0,Ce.jsx)(ul.P,{itemsAsButton:!0,includeStorageDatasets:!1,preFilterCollectionFn:le.j,setFilterText:c,onButtonClick:j})}),l&&(0,Ce.jsx)(ml.L,{itemsAsButton:!0,includeStorageDatasets:!1,preFilterCollectionFn:le.j,setFilterText:c,onButtonClick:j,filterText:l})]})]}),S=t?t.title:"Select a dataset to visualize";return(0,Ce.jsxs)(Ce.Fragment,{children:[(0,Ce.jsx)(vn.a,{ariaLabel:"Select a dataset to visualize",title:"Select a dataset to visualize",text:S,onRenderText:(0,Ha.IY)("GlobeLocation",S),onClick:y,styles:zl,disabled:n.enabled,"data-cy":"collection-selector"}),(0,Ce.jsx)(cl.u,{titleAriaId:b,isOpen:f,onDismiss:x,containerClassName:wl.container,children:h?C:w})]})},Cl=(0,xe.gh)(),wl=(0,xe.ZC)({container:{display:"flex",flexFlow:"column nowrap",alignItems:"stretch",width:"90%",maxWidth:1300,minHeight:"98vh"},header:[Cl.fonts.large,{flex:"1 1 auto",position:"sticky",top:0,background:Cl.palette.white,borderTop:"4px solid ".concat(Cl.palette.themePrimary),color:Cl.palette.neutralPrimary,display:"flex",flexFlow:"row wrap",alignItems:"center",padding:"12px 14px",zIndex:1,borderBottom:"1px solid ".concat(Cl.palette.neutralLight)}],title:{width:175,fontWeight:700,fontSize:21},titlePadded:{paddingLeft:5}}),Sl={iconName:"Cancel"},Zl={root:{color:Cl.palette.neutralPrimary,marginLeft:"auto",marginTop:4,marginRight:2},rootHovered:{color:Cl.palette.neutralDark}},Ll={paddingLeft:8,paddingTop:4,borderRight:"1px solid ".concat(Cl.palette.neutralLighter)},Tl={position:"sticky",top:65},zl={flexContainer:{justifyContent:"start"},root:{paddingLeft:8,paddingRight:4,borderColor:Cl.palette.neutralTertiaryAlt,backgroundColor:Cl.palette.white},rootHovered:{backgroundColor:Cl.palette.white,borderColor:Cl.palette.neutralTertiary},rootPressed:{backgroundColor:Cl.palette.white,borderColor:Cl.palette.neutralTertiary},rootExpanded:{backgroundColor:Cl.palette.white,borderColor:Cl.palette.neutralTertiary}},Pl={root:{padding:"0 5px"}},Il={marginTop:15},Bl=function(e){var t=e.options,n=e.action,o=e.title,r=e.icon,i=e.selectedKey,a=e.disabled,l=void 0!==a&&a,s=e.cyId,c=e.getStateValFn,d=(0,E.Y)(),u=(0,A.useCallback)((function(e,t){if(t){var o=c?c(t.key):t.key;d(n(o))}}),[n,d,c]);return(0,Ce.jsx)("div",{children:(0,Ce.jsx)(fo.L,{options:t,selectedKey:i,onChange:u,onRenderTitle:(0,Ha.ud)(r),onRenderPlaceholder:(0,Ha.gq)(r,o),ariaLabel:o,title:o,disabled:l,"data-cy":s,styles:Ml})})},Dl=(0,xe.gh)(),Ml={title:{borderColor:Dl.palette.neutralTertiaryAlt,":hover":{borderColor:Dl.palette.neutralTertiary+" !important"}}},_l=function(){var e=(0,E.Y)(),t=(0,E._)(s.Wq),n=t.collection,o=t.query,r=t.isCustomQuery,i=(0,E._)((function(e){return e.detail})).previewMode,a=(0,vo.Dm)(null===n||void 0===n?void 0:n.id),l=a.isSuccess,c=a.data;(0,A.useEffect)((function(){c&&null===o.name&&e((0,s.oT)(c.mosaics[0]))}),[e,c,o.name]);var d=l&&null!==c&&void 0!==c&&c.mosaics?c.mosaics.map((function(e){return{key:e.name||"",text:e.name||""}})):[];return(0,Ce.jsx)(Bl,{title:"Select a preset filter to find data",icon:"FluentFilter",action:s.oT,options:d,selectedKey:o.name,getStateValFn:function(e){return null===c||void 0===c?void 0:c.mosaics.find((function(t){return t.name===e}))},disabled:!(null!==n&&void 0!==n&&n.id)||r||i.enabled,cyId:"mosaic-selector"})},Al=n(54991),Rl=function(){var e=(0,E._)(s.EC);return function(t,n){var o=e.map((function(e){return new Si.n(e)})).find((function(e){return e.property===t}));if(!o)return!0;var r=Array.isArray(o.value)?o.value:[o.value];return((0,Al.Z)(r,n)||r.includes(n))&&["=",">",">=","in","between","like"].includes(o.operator)}},El=n(47730),ql=function(){var e,t,n,o=(0,E.Y)(),r=(0,E._)(s.Wq),i=r.collection,a=r.renderOption,l=(0,vo.Dm)(null===i||void 0===i?void 0:i.id).data;(0,A.useEffect)((function(){null!==l&&void 0!==l&&l.renderOptions&&null===a&&o((0,s.Qj)(l.renderOptions[0]))}),[o,l,a]);var c=null!==(e=null===l||void 0===l?void 0:l.renderOptions)&&void 0!==e?e:[],d=Rl(),u=c.map((function(e){var t,n=(0,El.Z)(null===(t=e.conditions)||void 0===t?void 0:t.map((function(e){return d(e.property,e.value)})));return{key:e.name,text:e.name,disabled:!n}})),h=function(e){var t;return null===l||void 0===l||null===(t=l.renderOptions)||void 0===t?void 0:t.find((function(t){return t.name===e}))},m=null!==(t=u.find((function(e){return e.key===(null===a||void 0===a?void 0:a.name)})))&&void 0!==t&&t.disabled?null===(n=u.find((function(e){return!e.disabled})))||void 0===n?void 0:n.key:null===a||void 0===a?void 0:a.name;if(m!==(null===a||void 0===a?void 0:a.name)&&m){var p=h(m);p&&o((0,s.Qj)(p))}return(0,Ce.jsx)(Bl,{title:"Select a rendering option",icon:"Layer",action:s.Qj,options:u,selectedKey:null===a||void 0===a?void 0:a.name,getStateValFn:h,disabled:!Boolean(null===l||void 0===l?void 0:l.renderOptions),cyId:"render-selector"})},Nl=function(e){var t=e.isCustomQuery,n=!(0,E._)((function(e){return e.mosaic})).isLoadingInitialState&&(0,Ce.jsxs)(Ce.Fragment,{children:[(0,Ce.jsx)(kl,{}),!t&&(0,Ce.jsx)(_l,{}),t&&(0,Ce.jsx)(tl,{}),(0,Ce.jsx)(ql,{})]});return(0,Ce.jsx)(xr.ErrorBoundary,{FallbackComponent:Hr.ZP,onError:Hr.E7,children:(0,Ce.jsx)(i.K,{tokens:Ol,children:n})})},Ol={childrenGap:6},Fl=function(){var e=(0,E.Y)(),t=(0,E._)(s.Wq),n=!t.collection,o=(0,A.useCallback)((function(){e((0,s.K0)(t.layerId))}),[e,t.layerId]);return(0,Ce.jsx)(i.K,{horizontal:!0,horizontalAlign:"end",children:(0,Ce.jsx)(ke.r,{disabled:n,styles:Kl,onClick:o,title:"Clear all selectors for current layer","data-cy":"reset",children:"Clear"})})},Kl={root:{fontSize:xe.TS.small}},Wl=function(){var e=(0,E.Y)(),t=(0,E._)(s.Wq),n=t.isCustomQuery,o=t.collection,r=(0,E._)((function(e){return e.detail})).previewMode,i=(0,vo.Dm)(null===o||void 0===o?void 0:o.id),a=i.data,l=i.isSuccess,c=(0,A.useRef)(null),d=(0,A.useCallback)((function(){e((0,s.fQ)(!0)),l&&a&&e((0,s.Bd)(a.defaultCustomQuery))}),[e,l,a]),u=!o||n||r.enabled;return(0,Ce.jsx)(Ce.Fragment,{children:(0,Ce.jsx)(ke.r,{ref:c,styles:Kl,onClick:d,disabled:u,"data-cy":"customize-query",title:"Customize the current filters applied to this dataset",children:"Advanced"})})},Yl=function(){var e=(0,E._)(s.Wq).collection,t=(0,Ce.jsxs)(i.K,{horizontal:!0,horizontalAlign:"end",tokens:Vl,styles:Ql,children:[(0,Ce.jsx)(Wl,{}),(0,Ce.jsx)(Ji.p,{styles:Gl}),(0,Ce.jsx)(Fl,{})]});return(0,Ce.jsxs)(i.K,{horizontal:!0,styles:Hl,children:[(0,Ce.jsx)(je.x,{styles:Ul,block:!0,children:"Explore datasets"}),e&&t]})},Vl={childrenGap:5},Hl={root:{justifyContent:"space-between"}},Gl={wrapper:{height:15,marginTop:9,marginLeft:0}},Ul={root:{padding:"5px 0",fontSize:xe.TS.mediumPlus,fontWeight:xe.lq.bold}},Ql={root:{marginRight:2}},Jl=function(){var e=(0,E.Y)(),t=(0,E._)((function(e){return e.mosaic})).isLoadingInitialState;return(0,A.useEffect)((function(){e((0,s.JF)(!0))}),[e]),t?(0,Ce.jsx)($r.$,{size:xi.E.large,label:"Loading initial state..."}):null},Xl=function(e){var t=e.sidebarVisibility,n=(0,E._)(s.Wq).isCustomQuery,o=(0,E._)((function(e){return e.detail})),r=o.selectedItem,a=o.display.showItemDetailsPanel,l=Boolean(r)&&a,c=(0,A.useMemo)((function(){return{searchPanelDisplay:l?"none":"flex",detailViewDisplay:l?"flex":"none"}}),[l]),d=c.searchPanelDisplay,u=c.detailViewDisplay,h=(0,vo.BN)(),m={root:{visibility:t,display:d,transition:"visibility 0.1s",padding:10,paddingBottom:20}},p={root:{height:"100%",minHeight:"-webkit-fill-available",display:u}};return(0,Ce.jsxs)(Ce.Fragment,{children:[(0,Ce.jsxs)(i.K,{id:"explorer-sidebar-selectors",styles:m,tokens:$l,children:[(0,Ce.jsx)(Yl,{}),(0,Ce.jsx)(Jl,{}),(0,Ce.jsx)(Nl,{isCustomQuery:n})]}),(0,Ce.jsx)(Fi,{request:h,visible:!l}),(0,Ce.jsx)(i.K,{styles:p,tokens:$l,children:(0,Ce.jsx)(Gr,{})})]})},$l={childrenGap:5},es=function(e){var t=e.collection,n=e.renderOption,o=e.handleClose;return t?(0,Ce.jsxs)(Oo,{title:"Image Export",subTitle:"".concat(t.title||t.id,", ").concat(null===n||void 0===n?void 0:n.name),onClose:o,children:[(0,Ce.jsx)(je.x,{children:"Generate an image of this dataset. "}),(0,Ce.jsx)(je.x,{children:"The image will be generated using the current search. Draw a bounding box for the image and select the image size. The image returned will be at the size provided and will contain the area drawn in the bounding box. Note that the image bounds may be larger than the drawn area."}),(0,Ce.jsx)(je.x,{children:"Click on the generated image to download or share."})]}):null},ts=function(e){var t=e.showBranding,n=e.onSettingsChange,o=(0,Me.k)(!1),r=(0,_.Z)(o,2),a=r[0],l=r[1],s=l.setFalse,c=l.toggle,d=(0,_e.M)("query-dropdown-button");return(0,Ce.jsxs)(i.K,{children:[(0,Ce.jsx)(Be.h,{id:d,className:os.button,iconProps:{iconName:"Settings"},title:"Settings",onClick:c}),(0,Ce.jsx)(Ho.r,{target:"#".concat(d),hidden:!a,onDismiss:s,items:[{key:"branding",text:"Include branding",canCheck:!0,checked:t,onClick:function(e){null===e||void 0===e||e.preventDefault(),n("showBranding",!t)}}]})]})},ns=(0,xe.gh)(),os=(0,xe.ZC)({button:{color:ns.semanticColors.bodyText,"&:hover":{color:ns.semanticColors.bodyText}}}),rs=(0,xe.gh)(),is={childrenGap:6},as={childrenGap:10},ls=[{key:"1920x1080",text:"Large (1920 x 1080)",title:"Use to generate a Teams background"},{key:"1280x720",text:"Medium (1280 x 720)",title:"Medium sized image with 16:9 aspect ratio"},{key:"1080x1080",text:"Square (1080 x 1080)",title:"Use for social media posts"},{key:"custom",text:"Custom",title:"Enter image size manually"}],ss={root:{height:"100%",overflowY:"auto",overflowX:"clip",padding:10}},cs={root:{width:136}},ds={root:{width:190}},us={root:{marginTop:10}},hs={root:{color:rs.semanticColors.errorText,fontSize:xe.TS.small}},ms=function(){var e,t=(0,E.Y)(),n=(0,E._)(s.Wq),o=n.collection,r=n.renderOption,l=n.query,d=n.layer,u=(0,E._)((function(e){return e.map})),h=u.zoom,m=u.sidebarPanel,p=u.drawnShape,g=u.isDrawBboxMode,f=(0,E._)((function(e){return P(e,null===o||void 0===o?void 0:o.id)})),v=(0,E._)((function(e){return I(e,null===o||void 0===o?void 0:o.id)})),y=(0,xo.Z)("(max-width: ".concat(O.P_,"px)"));(0,Je.Z)(v)&&(v={cols:1280,rows:720,imageSize:"1280x720",showBranding:!0});var x=(0,yo.$m)(null===o||void 0===o?void 0:o.id),b=(0,vo.ZV)([x],l,l.cql),j={geometry:(null===p||void 0===p?void 0:p.geometry)||null,zoom:Math.round(h),render_params:(null===r||void 0===r?void 0:r.options)+"&collection=".concat(null===o||void 0===o?void 0:o.id),cql:b},k=(0,Pe.Z)((0,Pe.Z)({},j),v),C=(0,pe._7)(k),L=C.data,T=C.isLoading,z=C.error,B=C.refetch,D=C.remove;(0,A.useEffect)((function(){L&&o&&!f.find((function(e){return e.url===L.url}))&&(t(w({collectionId:o.id,image:L})),D())}),[L,o,t,f,D]);var M=function(e,t){var n=e.currentTarget.name,o=parseInt(t||"0",10);_(n,o)},_=function(e,n){(null===o||void 0===o?void 0:o.id)&&t(Z({collectionId:null===o||void 0===o?void 0:o.id,imageSettings:(0,Pe.Z)((0,Pe.Z)({},v),{},(0,N.Z)({},e,n))}))},R=function(e,t,n){var o=e.cols,r=e.rows,i=e.zoom,a={start:[],frames:[],duration:[],step:[],map:[],isValid:!1};return o||a.frames.push("Required."),r||a.frames.push("Required."),i<((null===t||void 0===t?void 0:t.minZoom)||ae.Xe)&&a.map.push("Zoom in to see layer."),n||a.map.push("Please draw an export area on the map."),a.isValid=0===Object.values(a).reduce((function(e,t){return e+(Array.isArray(t)?t.length:0)}),0),a}(k,d,p),F=!T&&R.isValid,K=!g,W="custom"===(null===(e=v)||void 0===e?void 0:e.imageSize),Y=p?"Re-draw export area":"Draw export area",V=(0,Ce.jsxs)(a.v,{children:[(0,Ce.jsx)(je.x,{block:!0,children:"Start by selecting the area you want to capture on the map."}),(0,Ce.jsx)(vn.a,{styles:us,text:Y,iconProps:{iconName:"SingleColumnEdit"},onClick:function(){t((0,c.Kq)(!0)),y&&t((0,c.YB)(!1)),D()},disabled:!K})]}),H=(0,Ce.jsxs)(i.K,{styles:ss,tokens:as,children:[(0,Ce.jsx)(es,{collection:o,renderOption:r,handleClose:function(){t((0,c.qS)(q.mt.itemSearch)),t((0,c.JU)(null)),t((0,c.Kq)(!1)),D()}}),V,(0,Ce.jsx)(i.K,{horizontal:!0,horizontalAlign:"start",tokens:is,verticalAlign:"start",children:(0,Ce.jsx)(fo.L,{label:"Image Size",options:ls,defaultSelectedKey:v.imageSize,onChange:function(e,n){var r=null===n||void 0===n?void 0:n.key,i=v.cols,a=v.rows;if(r&&"custom"!==r){var l=r.split("x").map((function(e,t){return parseInt(e)}));i=l[0],a=l[1]}(null===o||void 0===o?void 0:o.id)&&t(Z({collectionId:null===o||void 0===o?void 0:o.id,imageSettings:(0,Pe.Z)((0,Pe.Z)({},v),{},{imageSize:r,cols:i,rows:a})}))},styles:ds})}),W&&(0,Ce.jsxs)(i.K,{horizontal:!0,horizontalAlign:"start",tokens:is,children:[(0,Ce.jsx)(go.n,{type:"number",label:"Width (px)",name:"cols",min:2,max:48,step:1,defaultValue:v.cols.toString(),onChange:M,styles:cs,errorMessage:R.frames[0]}),(0,Ce.jsx)(go.n,{type:"number",label:"Height (px)",name:"rows",min:1,step:1,defaultValue:v.rows.toString(),styles:cs,onChange:M,errorMessage:R.duration[0]})]}),(0,Ce.jsxs)(a.v,{shrink:!1,children:[(0,Ce.jsxs)(i.K,{horizontal:!0,horizontalAlign:"start",verticalAlign:"center",tokens:is,styles:us,children:[(0,Ce.jsx)(fn.K,{disabled:!F,onClick:function(){B({stale:!0})},children:"Generate Image"}),(0,Ce.jsx)(ts,{showBranding:v.showBranding,onSettingsChange:_})]}),Boolean(R.map.length)&&(0,Ce.jsxs)(je.x,{block:!0,styles:hs,children:["* ",R.map[0]]}),(0,Ce.jsx)(qo,{error:z})]}),(f.length||T)&&o&&(0,Ce.jsx)(Po,{collectionId:o.id,images:f,isLoading:T,onRemove:S})]});return m===q.mt.image?H:null},ps=function(){var e,t=(0,E.Y)(),n=(0,E._)((function(e){return e.map.showSidebar})),o=(0,E._)((function(e){return e.detail.display})).showSelectedItemAsLayer,r=(0,E._)((function(e){return e.map})).sidebarPanel,l=(0,A.useMemo)((function(){return{width:n?ae.ZR:0,sidebarVisibility:n?"visible":"hidden"}}),[n]),c=l.width,u=l.sidebarVisibility;(0,A.useEffect)((function(){return function(){t((0,s.Bm)()),t((0,d.YO)())}}),[t]);var h={root:{width:c,visibility:u,transition:"width 0.3s",minWidth:8}},m=!n||o?"explorer-sidebar-hidden":"",p=(e={},(0,N.Z)(e,q.mt.itemSearch,(0,Ce.jsx)(Xl,{sidebarVisibility:u})),(0,N.Z)(e,q.mt.animation,(0,Ce.jsx)(yr,{})),(0,N.Z)(e,q.mt.image,(0,Ce.jsx)(ms,{})),e);return(0,Ce.jsxs)(Ce.Fragment,{children:[(0,Ce.jsx)(a.v,{styles:h,className:"explorer-sidebar ".concat(m),children:(0,Ce.jsx)(i.K,{id:"explorer-sidebar-content",styles:gs,children:p[r]})}),(0,Ce.jsx)(po,{})]})},gs={root:{height:"100%"}},fs=55,vs=27,ys=1,xs=function(){var e=(0,r.F)(),t={height:(0,ue.Z)().height-fs-vs-ys};return(0,Ce.jsxs)(D.Z,{onGrid:!1,allowAnnouncement:!1,mainStyle:t,children:[(0,Ce.jsx)(M.Z,{title:"Explorer",description:"Explore Planetary Computer datasets"}),(0,Ce.jsx)(o.zt,{store:B,children:(0,Ce.jsxs)(i.K,{horizontal:!0,styles:bs,children:[(0,Ce.jsx)(ps,{}),(0,Ce.jsx)(a.v,{styles:{root:{borderLeft:"1px solid",borderLeftColor:e.palette.neutralLight}},grow:1,children:(0,Ce.jsx)(xr.ErrorBoundary,{FallbackComponent:Hr.ZP,onError:Hr.E7,children:(0,Ce.jsx)(co,{})})})]})})]})},bs={root:{height:"100%"}}},33471:function(){},24654:function(){},52361:function(){},94616:function(){}}]);
//# sourceMappingURL=394.04f2bdd2.chunk.js.map